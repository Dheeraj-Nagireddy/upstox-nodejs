<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"src_UpstoxAPI.js.html":{"id":"src_UpstoxAPI.js.html","title":"Source: src/UpstoxAPI.js","body":" Upstox API Modules Example Classes Upstox Source: src/UpstoxAPI.js /** * @fileoverview * @author renuka.misal@rksv.in (RenukaMisal92) */ // External Dependencies var _ = require('lodash'); var promise = require('bluebird'); var WebSocketClient = require('websocket').client; var atob = require('atob'); // Internal Dependencies var utils = require('./../utils/helper.js'); var logger = new utils.Logger(); var constants = require(&quot;./constants.json&quot;); /** * @classdesc API client class. You need to initialise a single instance of this class per `api_key`. * This module provides an easy to use wrapper over the HTTP APIs. * The HTTP calls have been converted to methods and their JSON responses. * Moreover we provide websocket connection APIS to get live updates from Upstox APIs. * ~~~~ * var Upstox = require(&quot;upstox&quot;); var upstox = new Upstox(&quot;your_apikey&quot;); var params = { &quot;apiSecret&quot; : &quot;your_apiSecret&quot;, &quot;code&quot; : &quot;your_code_generated_in login&quot;, &quot;grant_type&quot; : &quot;authorization_code&quot;, &quot;redirect_uri&quot; : &quot;your_redirect_uri&quot; }; upstox.getAccessToken(params) .then(function(response) { start(); }) .catch(function(err) { console.log(err); }); start(); function start() { // Fetch holdings. // You can have other api calls here. var loginUrl = upstox.getLoginUri(&quot;your_redirect_uri&quot;); console.log(&quot;**************** loginUri ***********&quot; + loginUrl); // Get Holdings upstox.getHoldings() .then(function(response) { // You got user's holding details. console.log(response); }).catch(function(err) { // Something went wrong. console.log(err); }); // GetProfile upstox.getProfile() .then(function (response) { console.log(response); //done(); }) .catch(function(error){ console.log(&quot;%%%%%%%%%%%%% &quot;, error); //done(error); }); // PlaceOrder Note : default product = I i.e intra day order will be placed. var orderObject = { transaction_type:&quot;b&quot;, exchange:&quot;NSE_EQ&quot;, symbol: &quot;RELIANCE&quot;, quantity: 1, order_type:&quot;m&quot; }; upstox.placeOrder(orderObject) .then(function(response) { // Order details received console.log(response); }) .catch(function(err) { // Something went wrong. console.log(err); }); // Web socket upstox.connectSocket() .then(function(){ upstox.on(&quot;orderUpdate&quot;, function(message) { console.log(&quot;orderUpdate&quot;, message); }); upstox.on(&quot;positionUpdate&quot;, function(message) { //message for position conversion console.log(&quot;positionUpdate&quot;, message); }); upstox.on(&quot;tradeUpdate&quot;, function(message) { //message for trade updates console.log(&quot;tradeUpdate&quot;, message); }); upstox.on(&quot;liveFeed&quot;, function(message) { //message for live feed console.log(&quot;liveFeed&quot;, message); }); // upstox.on(&quot;disconnected&quot;, function(message) { // //listener after socket connection is disconnected // console.log(&quot;disconnected&quot;, message); // }); upstox.on(&quot;error&quot;, function(error) { //error listener console.log(&quot;error&quot;, message); }); }).catch(function(error) { console.log( &quot;******** &quot; , error); }); } * ~~~~ * * @constructor * @name Upstox * @param {string} apiKey Assigned to you used to authenticate the developers app * @example &lt;caption&gt;Initialize Upstox object&lt;/caption&gt; * var Upstox = require(&quot;Upstox&quot;); * var up = new Upstox(&quot;your_apikey&quot;); * */ function Upstox(apiKey) { /** * @type {{apiKey: *}} * @private * @memberOf Upstox */ if(!apiKey){ throw new Error(&quot;Missing apiKey&quot;); } this.auth = { apiKey: apiKey, accessToken : null }; this.isAuthenticated = false; this.socketOrderUpdateListener; this.socketPositionUpdateListener; this.socketTradeUpdateListener; this.socketLiveFeedListener; this.socketCloseListener; this.socketErrorListener; this.socketConnection; } /** * @method setToken * @description method to associate the accessToken with the class object. * @memberOf Upstox * @instance * @param {string} accessToken Token generated after the users logged in successfully with its Upstox apiKey(username) and password. */ Upstox.prototype.setToken = function(accessToken){ var __this = this; __this.auth.accessToken = accessToken; __this.isAuthenticated = true; }; /** * @method getLoginUri * @memberOf Upstox * @param redirect_uri Redirect_uri specified by you while creating an app * @instance * @return {string} Login Url to get authorized. */ Upstox.prototype.getLoginUri = function(redirect_uri){ var urLDetails = utils.generateUrl('authorize', null); var __this = this; return urLDetails.host + urLDetails.path + &quot;?apiKey=&quot; + __this.auth.apiKey + &quot;&amp;redirect_uri=&quot; + redirect_uri + &quot;&amp;response_type=&quot; + &quot;code&quot;; }; /** * @method getAccessToken * @description Method to get the session token required to authenticate user * @memberOf Upstox * @instance * @param {object} params * @param {string} params.apiSecret * @param {string} params.code * @param {string} params.redirect_uri * @return promise */ Upstox.prototype.getAccessToken = function(params) { var HTTP_METHOD = &quot;POST&quot;; var __this = this, accessToken; var basicAuth = &quot;Basic &quot; + new Buffer(__this.auth.apiKey + ':' + params.apiSecret).toString('base64'); delete(params.apiSecret); params[&quot;grant_type&quot;] = &quot;authorization_code&quot;; return new promise(function (resolve, reject) { utils.restify(&quot;accessToken&quot;, HTTP_METHOD, params, __this.auth, {basicAuth: basicAuth}) .then(function (response) { __this.setToken(response.access_token); __this.isAuthenticated = true; resolve(response); }) .catch(function (err) { reject(err); }); }); }; /** * @method getProfile * @description Method to get the profile details *@instance * @memberOf Upstox * @return {res} * @example * { &quot;code&quot;: 200, &quot;status&quot;: &quot;OK&quot;, &quot;timestamp&quot;: &quot;2017-05-16T11:00:04+05:30&quot;, &quot;message&quot;: &quot;success&quot;, &quot;data&quot;: { &quot;client_id&quot;: &quot;990099&quot;, &quot;name&quot;: &quot;Upstox API&quot;, &quot;account_type&quot;: &quot;--&quot;, &quot;pan&quot;: &quot;ABCDE1234F&quot;, &quot;email&quot;: &quot;support@upstox.com&quot;, &quot;phone&quot;: &quot;02261309999&quot;, &quot;dob&quot;: &quot;01/01/2012&quot;, &quot;is_active&quot;: true, &quot;exchanges_enabled&quot;: [ &quot;BSE_EQ&quot;, &quot;NSE_EQ&quot;, &quot;NSE_FO&quot;, &quot;MCX_FO&quot;, &quot;NCD_FO&quot;, &quot;BCD_FO&quot; ], &quot;products_enabled&quot;: [ &quot;OCO&quot;, &quot;D&quot;, &quot;CO&quot;, &quot;I&quot; ], &quot;bank_name&quot;: &quot;State Bank of india&quot;, &quot;bank_account&quot;: &quot;123456789&quot;, } } */ Upstox.prototype.getProfile = function () { var __this = this; var HTTP_METHOD = &quot;GET&quot;; return utils.restify(&quot;profile&quot;, HTTP_METHOD, null, __this.auth ); }; /** * @method getHoldings * @description Get the user's holdings. * @instance * @memberOf Upstox * @return {res} * @example { &quot;code&quot;: 200, &quot;status&quot;: &quot;OK&quot;, &quot;timestamp&quot;: &quot;2017-05-17T10:37:58+05:30&quot;, &quot;message&quot;: &quot;success&quot;, &quot;data&quot;: [ { &quot;instrument&quot;: [ { &quot;exchange&quot;: &quot;NSE_EQ&quot;, &quot;symbol&quot;: &quot;DAAWAT&quot;, &quot;token&quot;: 13816 }, { &quot;exchange&quot;: &quot;BSE_EQ&quot;, &quot;symbol&quot;: &quot;DAAWAT&quot;, &quot;token&quot;: 532783 } ], &quot;product&quot;: &quot;D&quot;, &quot;collateral_type&quot;: &quot;WC&quot;, &quot;cnc_used_quantity&quot;: 0, &quot;quantity&quot;: 1, &quot;collateral_qty&quot;: 0, &quot;haircut&quot;: 25 } ] } */ Upstox.prototype.getHoldings = function () { var __this = this; var HTTP_METHOD = &quot;GET&quot;; return utils.restify(&quot;holdings&quot;, HTTP_METHOD, null, __this.auth); }; /** * @method getBalance * @instance * @description Get the user's account balances for equity and commodity. * @memberOf Upstox * @example { &quot;code&quot;: 200, &quot;status&quot;: &quot;OK&quot;, &quot;timestamp&quot;: &quot;2017-05-17T11:00:04+05:30&quot;, &quot;message&quot;: &quot;success&quot;, &quot;data&quot;: { &quot;equity&quot;: { &quot;used_margin&quot;: 0, &quot;unrealized_mtm&quot;: 0, &quot;realized_mtm&quot;: 0, &quot;payin_amount&quot;: 0, &quot;span_margin&quot;: 0, &quot;adhoc_margin&quot;: 12000, &quot;notional_cash&quot;: 0, &quot;available_margin&quot;: 10717.11, &quot;exposure_margin&quot;: 0 }, &quot;commodity&quot;: { &quot;used_margin&quot;: 0, &quot;unrealized_mtm&quot;: 0, &quot;realized_mtm&quot;: 0, &quot;payin_amount&quot;: 0, &quot;span_margin&quot;: 0, &quot;adhoc_margin&quot;: 0, &quot;notional_cash&quot;: 0, &quot;available_margin&quot;: 520.45, &quot;exposure_margin&quot;: 0 } } } * @param {object} params * @param {string} params.type eq - Equity , com - Commodity * @return {res} */ Upstox.prototype.getBalance = function () { var __this = this; var HTTP_METHOD = &quot;GET&quot;; return utils.restify(&quot;balance&quot;, HTTP_METHOD, null, __this.auth); }; /** * @method getPositions * @instance * @description Get the user's day positions. * @memberOf Upstox * @return {res} * @example { &quot;code&quot;: 200, &quot;status&quot;: &quot;OK&quot;, &quot;timestamp&quot;: &quot;2017-05-15T14:40:04+05:30&quot;, &quot;message&quot;: &quot;success&quot;, &quot;data&quot;: [ { &quot;exchange&quot;: &quot;NSE_EQ&quot;, &quot;product&quot;: &quot;I&quot;, &quot;symbol&quot;: &quot;RELIANCE&quot;, &quot;token&quot;: 2885, &quot;buy_amount&quot;: 1344.25, &quot;sell_amount&quot;: 0, &quot;buy_quantity&quot;: 1, &quot;sell_quantity&quot;: 0, &quot;cf_buy_amount&quot;: 0, &quot;cf_sell_amount&quot;: 0, &quot;cf_buy_quantity&quot;: 0, &quot;cf_sell_quantity&quot;: 0, &quot;avg_buy_price&quot;: 1344.25, &quot;avg_sell_price&quot;: 0.00, &quot;net_quantity&quot;: 1, &quot;close_price&quot;: 1350.45, &quot;realized_profit&quot;: 0.00, &quot;unrealized_profit&quot;: 3.09 } ] } */ Upstox.prototype.getPositions = function () { var __this = this; var HTTP_METHOD = &quot;GET&quot;; return utils.restify(&quot;positions&quot;, HTTP_METHOD, null, __this.auth); }; /** * @method placeOrder * @description Placing an order * @memberOf Upstox * @instance * @param {object} params * @param {string} params.transaction_type Buy or Sell. b : BUY, s : SELL * @param {string} params.exchange The exchange segment * @param {string} params.symbol The symbol of the instrument * @param {number} params.quantity The quantity of order to buy/sell * @param {string} params.order_type The type of order to place. l : Limit Order, m : Market Order * @param {number} [params.price] The limit price for the order, defaults to 0 * @param {number} [params.trigger_price] The trigger price for the order, defaults to 0 * @param {string} [params.duration] The duration of the order (day / ioc) * @param {string} [params.product] The product (I: Intraday Order, D: Delivery Order, CO: Cover Order,OCO: Bracket Order) * @param {number} [params.disclosed_quantity] The quantity to disclose * @param {boolean} [params.is_amo] true: Indicates order is After Market Order, false: Indicates order is normal order * @param {number} [params.stoploss] The stoploss for OCO order. It is mandatory for OCO. * @param {number} [params.squareoff] The squareoff or profit taking for OCO order. It is mandatory for OCO. * @return {res} * @example { &quot;code&quot;: 200, &quot;status&quot;: &quot;OK&quot;, &quot;timestamp&quot;: &quot;2017-05-17T11:01:45+05:30&quot;, &quot;message&quot;: &quot;success&quot;, &quot;data&quot;: { &quot;exchange&quot;: &quot;NSE_EQ&quot;, &quot;token&quot;: 2885, &quot;symbol&quot;: &quot;RELIANCE&quot;, &quot;product&quot;: &quot;I&quot;, &quot;order_type&quot;: &quot;L&quot;, &quot;duration&quot;: &quot;DAY&quot;, &quot;price&quot;: 1200, &quot;trigger_price&quot;: 0, &quot;quantity&quot;: 1, &quot;disclosed_quantity&quot;: 0, &quot;transaction_type&quot;: &quot;B&quot;, &quot;average_price&quot;: 0, &quot;traded_quantity&quot;: 0, &quot;message&quot;: &quot;&quot;, &quot;exchange_order_id&quot;: &quot;&quot;, &quot;parent_order_id&quot;: &quot;NA&quot;, &quot;order_id&quot;: &quot;170517000028023&quot;, &quot;exchange_time&quot;: &quot;&quot;, &quot;time_in_micro&quot;: &quot;0&quot;, &quot;status&quot;: &quot;put order req received&quot;, &quot;is_amo&quot;: false, &quot;valid_date&quot;: &quot;&quot;, &quot;order_request_id&quot;: &quot;1&quot; } } */ Upstox.prototype.placeOrder = function(params){ var __this = this; var HTTP_METHOD = &quot;POST&quot;; return utils.restify(&quot;placeOrder&quot;, HTTP_METHOD, params, __this.auth); }; /** * Get the orders placed * @method getOrders * @instance * @memberOf Upstox * @return {res} * @example { &quot;code&quot;: 200, &quot;status&quot;: &quot;OK&quot;, &quot;timestamp&quot;: &quot;2017-05-17T11:02:39+05:30&quot;, &quot;message&quot;: &quot;success&quot;, &quot;data&quot;: [ { &quot;exchange&quot;: &quot;NSE_EQ&quot;, &quot;token&quot;: 2885, &quot;symbol&quot;: &quot;RELIANCE&quot;, &quot;product&quot;: &quot;I&quot;, &quot;order_type&quot;: &quot;L&quot;, &quot;duration&quot;: &quot;DAY&quot;, &quot;price&quot;: 1250, &quot;trigger_price&quot;: 0, &quot;quantity&quot;: 1, &quot;disclosed_quantity&quot;: 0, &quot;transaction_type&quot;: &quot;B&quot;, &quot;average_price&quot;: 0, &quot;traded_quantity&quot;: 0, &quot;message&quot;: &quot;&quot;, &quot;exchange_order_id&quot;: &quot;1200000000219469&quot;, &quot;parent_order_id&quot;: &quot;NA&quot;, &quot;order_id&quot;: &quot;170517000003728&quot;, &quot;exchange_time&quot;: &quot;17-May-2017 09:17:43&quot;, &quot;time_in_micro&quot;: &quot;1494992898053855&quot;, &quot;status&quot;: &quot;cancelled&quot;, &quot;is_amo&quot;: false, &quot;valid_date&quot;: &quot;--&quot;, &quot;order_request_id&quot;: &quot;1&quot;, &quot;total_traded_quantity&quot;: 0, &quot;stoploss&quot;: 0, &quot;squareoff&quot;: 0, &quot;trailing_ticks&quot;: 0 } ] } */ Upstox.prototype.getOrders = function(){ var __this = this; var HTTP_METHOD = &quot;GET&quot;; return utils.restify(&quot;getOrders&quot;, HTTP_METHOD, null, __this.auth) }; /** * Get the trades details for a particular order * @method getTrades * @instance * @param {object} params * @param {string} params.order_id the order id for which trade details are to be fetched * @memberOf Upstox * @return {res} * @example { &quot;code&quot;: 200, &quot;status&quot;: &quot;OK&quot;, &quot;timestamp&quot;: &quot;2017-05-15T14:48:52+05:30&quot;, &quot;message&quot;: &quot;success&quot;, &quot;data&quot;: [ { &quot;exchange&quot;: &quot;NSE_EQ&quot;, &quot;token&quot;: 2885, &quot;symbol&quot;: &quot;RELIANCE&quot;, &quot;product&quot;: &quot;I&quot;, &quot;order_type&quot;: &quot;M&quot;, &quot;transaction_type&quot;: &quot;B&quot;, &quot;traded_quantity&quot;: 1, &quot;exchange_order_id&quot;: &quot;1200000003336976&quot;, &quot;order_id&quot;: &quot;170515000047270&quot;, &quot;exchange_time&quot;: &quot;15-May-2017 13:56:31&quot;, &quot;time_in_micro&quot;: &quot;1494836825761723&quot;, &quot;total_traded_quantity&quot;: 0, &quot;traded_shares&quot;: 0, &quot;traded_price&quot;: 0, &quot;trade_id&quot;: &quot;51345784&quot;, } ] } */ Upstox.prototype.getTrades = function(params){ var __this = this; var HTTP_METHOD = &quot;GET&quot;; return utils.restify(&quot;tradesInfo&quot;, HTTP_METHOD, params, __this.auth) }; /** * @method modifyOrder * @description Modify the order by updating the order quantity * @memberOf Upstox * @instance * @param {Object} params * @param {number} params.order_id The order which is to be modified * @param {number} [params.parent_order_id] The parent order id in case of CO and OCO orders * @param {number} [params.price] The limit price for the order, defaults to 0 * @param {number} [params.trigger_price] The trigger price for the order, defaults to 0 * @param {number} [params.quantity] The quantity of order * @param {number} [params.disclosed_quantity] The quantity to disclose * @param {string} [params.valid_date] The valid date of the order in case of MCX_FO * @return {res} * @example { &quot;code&quot;: 200, &quot;status&quot;: &quot;OK&quot;, &quot;timestamp&quot;: &quot;2017-03-27T11:57:02+05:30&quot;, &quot;message&quot;: &quot;success&quot;, &quot;data&quot;: { &quot;exchange&quot;: &quot;NSE_EQ&quot;, &quot;token&quot;: 2885, &quot;symbol&quot;: &quot;RELIANCE&quot;, &quot;product&quot;: &quot;I&quot;, &quot;order_type&quot;: &quot;M&quot;, &quot;duration&quot;: &quot;DAY&quot;, &quot;price&quot;: 0, &quot;trigger_price&quot;: 0, &quot;quantity&quot;: 10, &quot;disclosed_quantity&quot;: 0, &quot;transaction_type&quot;: &quot;B&quot;, &quot;average_price&quot;: 0, &quot;traded_quantity&quot;: 0, &quot;message&quot;: &quot;&quot;, &quot;exchange_order_id&quot;: &quot;&quot;, &quot;parent_order_id&quot;: &quot;NA&quot;, &quot;order_id&quot;: &quot;170327000000003&quot;, &quot;exchange_time&quot;: &quot;&quot;, &quot;time_in_micro&quot;: &quot;1490595778207641&quot;, &quot;status&quot;: &quot;not modified&quot;, &quot;is_amo&quot;: false, &quot;valid_date&quot;: &quot;&quot;, &quot;order_request_id&quot;: &quot;2&quot;, &quot;total_traded_quantity&quot;: 0, &quot;traded_shares&quot;: 0, &quot;traded_price&quot;: 0, &quot;stop_loss&quot;: 0, &quot;square_off&quot;: 0, &quot;trailing_ticks&quot;: 0 } } */ Upstox.prototype.modifyOrder = function(params){ var __this = this; var HTTP_METHOD = &quot;PUT&quot;; params = params || {}; if(!params.parent_order_id){ params[&quot;parent_order_id&quot;] = &quot;&quot;; } return utils.restify(&quot;modifyOrder&quot;, HTTP_METHOD, params, __this.auth) }; /** * @method cancelOrder * @description Cancel the order * @memberOf Upstox * @instance * @param {object} params * @param {number} params.order_id order_id generated after you place an order. * @return {res} * @example { &quot;code&quot;: 200, &quot;status&quot;: &quot;OK&quot;, &quot;timestamp&quot;: &quot;2017-03-27T11:38:40+05:30&quot;, &quot;message&quot;: &quot;success&quot;, &quot;data&quot;: { &quot;exchange&quot;: &quot;NSE_EQ&quot;, &quot;token&quot;: 2885, &quot;symbol&quot;: &quot;RELIANCE&quot;, &quot;product&quot;: &quot;I&quot;, &quot;order_type&quot;: &quot;M&quot;, &quot;duration&quot;: &quot;DAY&quot;, &quot;price&quot;: 0, &quot;trigger_price&quot;: 0, &quot;quantity&quot;: 1, &quot;disclosed_quantity&quot;: 1, &quot;transaction_type&quot;: &quot;B&quot;, &quot;average_price&quot;: 0, &quot;traded_quantity&quot;: 0, &quot;message&quot;: &quot;&quot;, &quot;exchange_order_id&quot;: &quot;&quot;, &quot;parent_order_id&quot;: &quot;NA&quot;, &quot;order_id&quot;: &quot;170327000000002&quot;, &quot;exchange_time&quot;: &quot;&quot;, &quot;time_in_micro&quot;: &quot;1490594676511489&quot;, &quot;status&quot;: &quot;not cancelled&quot;, &quot;is_amo&quot;: false, &quot;valid_date&quot;: &quot;&quot;, &quot;order_request_id&quot;: &quot;2&quot;, &quot;total_traded_quantity&quot;: 0, &quot;traded_shares&quot;: 0, &quot;traded_price&quot;: 0, &quot;stop_loss&quot;: 0, &quot;square_off&quot;: 0, &quot;trailing_ticks&quot;: 0 } } */ Upstox.prototype.cancelOrder = function(params){ var __this = this; var HTTP_METHOD = &quot;DELETE&quot;; params = params || {}; if(!params.parent_order_id){ params[&quot;parent_order_id&quot;] = &quot;&quot;; } return utils.restify(&quot;cancelOrder&quot;, HTTP_METHOD, params, __this.auth) }; /** * @method getMasterContract * @description Download the master contract as csv. * The master contract contains all necessary information about all available contracts. * Gets all contracts or filter contracts by exchange segment. * @memberOf Upstox * @instance * @param {object} params * @param {string} [params.exchange] name of the exchange to get specific BOD details * ~~~~ eg : The exchange segment params.exchange can be - bse_eq (BSE Equity) bcd_fo (BSE Futures &amp; Options) nse_eq (NSE Equity) nse_fo (NSE Futures &amp; Options) ncd_fo (NSE Currency Futures &amp; Options) ~~~~ * @return {res} * @example * { &quot;code&quot;: 200, &quot;status&quot;: &quot;OK&quot;, &quot;timestamp&quot;: &quot;2017-03-07T15:33:08+05:30&quot;, &quot;message&quot;: &quot;success&quot;, &quot;data&quot;:[ &quot;exchange,token,parent_token,symbol,name,closing_price,expiry,strike_price,tick_size,lot_size,instrument_type&quot;, &quot;NSE_EQ,19262,,1,LTAMC - 1,,,,1,1,&quot;, &quot;NSE_EQ,10104,,1IADD,DHFL PRAMERICA MF - HYBRI,,,,1,1,&quot;, &quot;NSE_EQ,10105,,1ID1G,DHFL PRAMERICA MF - HYBRI,,,,1,1,&quot;, &quot;NSE_EQ,10106,,1ID2D,DHFL PRAMERICA MF - HYBRI,,,,1,1,&quot;, ..... ] } */ Upstox.prototype.getMasterContract = function(params){ var __this = this; var HTTP_METHOD = &quot;GET&quot;; params = params || {}; if(!params.exchange){ params[&quot;exchange&quot;] = &quot;&quot;; } return utils.restify(&quot;masterContract&quot;, HTTP_METHOD, params, __this.auth) }; /** * @method getLiveFeed * @description Get Instruments list * @memberOf Upstox * @instance * @param {object} params * @param {string} params.exchange name of the exchange to get live feeds of. * ~~~~ eg: The exchange segment params.exchange can be - bse_eq (BSE Equity) bcd_fo (BSE Futures &amp; Options) nse_eq (NSE Equity) nse_fo (NSE Futures &amp; Options) ncd_fo (NSE Currency Futures &amp; Options) ~~~~ * @param {string} params.symbol The symbol of the instrument. This must match exactly as given in the master contract csv. * ~~~ eg: reliance ~~~ * @param {string} params.type type of feed. * ~~~ eg: &quot;ltp&quot;, &quot;full&quot; ~~~ * @param {string} [params.format] Response format json/csv * @return {res} * @example * ~~~ If you request for LTP, following will be the response { &quot;code&quot;: 200, &quot;status&quot;: &quot;OK&quot;, &quot;timestamp&quot;: &quot;2017-05-15T16:45:12+05:30&quot;, &quot;message&quot;: &quot;feed&quot;, &quot;data&quot;: { &quot;timestamp&quot;: 1494843956000, &quot;exchange&quot;: &quot;NSE_EQ&quot;, &quot;symbol&quot;: &quot;RELIANCE&quot;, &quot;ltp&quot;: 1344.1, &quot;close&quot;: 1350.45 } } ~~~ If you request for Mini, following will be the response { &quot;code&quot;: 200, &quot;status&quot;: &quot;OK&quot;, &quot;timestamp&quot;: &quot;2017-05-15T15:10:12+05:30&quot;, &quot;message&quot;: &quot;feed&quot;, &quot;data&quot;: { &quot;timestamp&quot;: 1494837991000, &quot;exchange&quot;: &quot;NSE_FO&quot;, &quot;symbol&quot;: &quot;NIFTY17MAYFUT&quot;, &quot;ltp&quot;: 9446.8, &quot;open&quot;: 9448, &quot;high&quot;: 9454.4, &quot;low&quot;: 9437, &quot;close&quot;: 9414.8, &quot;vtt&quot;: 2802525, &quot;atp&quot;: 9446.71, &quot;oi&quot;: 21256725, &quot;spot_price&quot;: 9442.5, &quot;total_buy_qty&quot;: 831075, &quot;total_sell_qty&quot;: 858375, &quot;bids&quot;: [ { &quot;quantity&quot;: 900, &quot;price&quot;: 9446.7, &quot;orders&quot;: 2 } ], &quot;asks&quot;: [ { &quot;quantity&quot;: 450, &quot;price&quot;: 9447, &quot;orders&quot;: 1 } ] } } ~~~ If you request for Full, following will be the response { &quot;code&quot;: 200, &quot;status&quot;: &quot;OK&quot;, &quot;timestamp&quot;: &quot;2017-05-15T15:10:42+05:30&quot;, &quot;message&quot;: &quot;feed&quot;, &quot;data&quot;: { &quot;timestamp&quot;: 1494837991000, &quot;exchange&quot;: &quot;NSE_FO&quot;, &quot;symbol&quot;: &quot;NIFTY17MAYFUT&quot;, &quot;ltp&quot;: 9446.8, &quot;open&quot;: 9448, &quot;high&quot;: 9454.4, &quot;low&quot;: 9437, &quot;close&quot;: 9414.8, &quot;vtt&quot;: 2802525, &quot;atp&quot;: 9446.71, &quot;oi&quot;: 21256725, &quot;spot_price&quot;: 9442.15, &quot;total_buy_qty&quot;: 830925, &quot;total_sell_qty&quot;: 858375, &quot;lower_circuit&quot;: 8473.35, &quot;upper_circuit&quot;: 10356.3, &quot;bids&quot;: [ { &quot;quantity&quot;: 900, &quot;price&quot;: 9446.7, &quot;orders&quot;: 2 }, { &quot;quantity&quot;: 75, &quot;price&quot;: 9446.65, &quot;orders&quot;: 1 }, { &quot;quantity&quot;: 1050, &quot;price&quot;: 9446.6, &quot;orders&quot;: 4 }, { &quot;quantity&quot;: 150, &quot;price&quot;: 9446.55, &quot;orders&quot;: 1 }, { &quot;quantity&quot;: 75, &quot;price&quot;: 9446.1, &quot;orders&quot;: 1 } ], &quot;asks&quot;: [ { &quot;quantity&quot;: 450, &quot;price&quot;: 9447, &quot;orders&quot;: 1 }, { &quot;quantity&quot;: 450, &quot;price&quot;: 9447.3, &quot;orders&quot;: 1 }, { &quot;quantity&quot;: 900, &quot;price&quot;: 9447.4, &quot;orders&quot;: 1 }, { &quot;quantity&quot;: 75, &quot;price&quot;: 9447.45, &quot;orders&quot;: 1 }, { &quot;quantity&quot;: 75, &quot;price&quot;: 9447.55, &quot;orders&quot;: 1 } ] } } ~~~ */ Upstox.prototype.getLiveFeed = function(params){ var __this = this; var HTTP_METHOD = &quot;GET&quot;; return utils.restify(&quot;liveFeed&quot;, HTTP_METHOD, params, __this.auth); }; /** * @method getOHLC * @description Get the OHLC candle values for a given instrument * @memberOf Upstox * @instance * @param params * @param {string} params.exchange name of the exchange to get live feeds of. * ~~~~ eg: The exchange segment params.exchange can be - bse_eq (BSE Equity) bcd_fo (BSE Futures &amp; Options) nse_eq (NSE Equity) nse_fo (NSE Futures &amp; Options) ncd_fo (NSE Currency Futures &amp; Options) ~~~~ * @param {string} params.symbol The symbol of the instrument. This must match exactly as given in the master contract csv * ~~~ eg: reliance ~~~ * @param {string} [params.interval] Default: 1day * ~~~~~ 1MINUTE 5MINUTE 10MINUTE 30MINUTE 60MINUTE 1DAY 1WEEK 1MONTH * ~~~~~ * @param {string} [params.start_date] Default: 15 days before today * ~~~~~ Date format: DD-MM-YYYY ~~~~~ * @param {string} [params.end_date] Default: today * ~~~~~ Date format: DD-MM-YYYY ~~~~~ * @param {string} [params.format] Default: json * ~~~~~ csv json ~~~~ * @return {res} * @example { &quot;code&quot;: 200, &quot;status&quot;: &quot;OK&quot;, &quot;timestamp&quot;: &quot;&quot;, &quot;message&quot;: &quot;ohlc&quot;, &quot;data&quot;: [ { &quot;timestamp&quot;: 1485973800000, &quot;open&quot;: 1050, &quot;high&quot;: 1050.8, &quot;low&quot;: 1038.25, &quot;close&quot;: 1043.5, &quot;volume&quot;: 2079908, &quot;cp&quot;: 1045.55 } ] } */ Upstox.prototype.getOHLC = function(params){ var __this = this; var HTTP_METHOD = &quot;GET&quot;; return utils.restify(&quot;OHLC&quot;, HTTP_METHOD, params, __this.auth); }; /** * @method subscribeFeed * @description Subscribe to a live feed for a given exchange and set of symbols * @memberOf Upstox * @instance * @param params * @param {string} params.exchange name of the exchange to get live feeds of. * ~~~~ eg: The exchange segment params.exchange can be - bse_eq (BSE Equity) bcd_fo (BSE Futures &amp; Options) nse_eq (NSE Equity) nse_fo (NSE Futures &amp; Options) ncd_fo (NSE Currency Futures &amp; Options) ~~~~ * @param {string} params.symbol The symbol of the instrument. This must match exactly as given in the master contract csv. The symbol can have multiple symbols, separated by comma * ~~~ eg: reliance ~~~ * @param {string} params.type The type of feed &quot;ltp&quot; or &quot;full&quot; * @return {res} */ Upstox.prototype.subscribeFeed = function(params){ var __this = this; var HTTP_METHOD = &quot;GET&quot;; return utils.restify(&quot;liveFeedSubscribe&quot;, HTTP_METHOD, params, __this.auth) } /** * @method unsubscribeFeed * @description Unsubscribe from a live feed for a given exchange and set of symbols * @memberOf Upstox * @instance * @param params * @param {string} params.exchange name of the exchange to get live feeds of. * ~~~~ eg: The exchange segment params.exchange can be - bse_eq (BSE Equity) bcd_fo (BSE Futures &amp; Options) nse_eq (NSE Equity) nse_fo (NSE Futures &amp; Options) ncd_fo (NSE Currency Futures &amp; Options) ~~~~ * @param {string} params.symbol The symbol of the instrument. This must match exactly as given in the master contract csv. The symbol can have multiple symbols, separated by comma * ~~~ eg: reliance ~~~ * @param {string} params.type The type of feed &quot;ltp&quot; or &quot;full&quot; * @return {res} */ Upstox.prototype.unsubscribeFeed = function(params){ var __this = this; var HTTP_METHOD = &quot;GET&quot;; return utils.restify(&quot;liveFeedUnsubscribe&quot;, HTTP_METHOD, params, __this.auth) } /** * @method connectSocket * @description Connect to web socket server. * @memberOf Upstox * @instance * @return promise * @throws {Error} User not autheticated * @throws {Error} Connection Error * @example var upstox = new Upstox(&quot;your_apikey&quot;, &quot;your_apiSecretKey&quot;); upstox.getSessionToken(login_credentials) .then((response)=&gt;{ upstox.connectSocket() .then(() =&gt; { //code to set socket listeners }, (err) =&gt; { //handle connection errors }); }); */ Upstox.prototype.connectSocket = function() { var __this = this, socket = new WebSocketClient(); __this.socket = socket; return new promise(function (resolve, reject) { if(__this.isAuthenticated) { socket.on('connectFailed', function(error) { reject(error); }); socket.on('connect', function(connection) { __this.socketConnection = connection; connection.on('error', function(error) { if(__this.socketErrorListener) { __this.socketErrorListener.call(null, error); } else { logger.debug(&quot;Connection Error: &quot; + error.toString()); } }); connection.on('close', function() { if(__this.socketCloseListener) { __this.socketCloseListener.call(null, &quot;Connection Closed&quot;); } else { logger.debug(&quot;Connection Closed&quot;); } }); connection.on('message', function(message) { var parsedMessage, socketListener; if(message.type === &quot;utf8&quot;) { parsedMessage = JSON.parse(message.utf8Data); if(utils.isStatus2XX(parsedMessage.code)) { switch (parsedMessage.message) { case constants.MESSAGE_TYPES.FILL_REPORT: socketListener = __this.socketTradeUpdateListener; break; case constants.MESSAGE_TYPES.ORDER_UPDATE: socketListener = __this.socketOrderUpdateListener; break; case constants.MESSAGE_TYPES.POSITION_UPDATE: case constants.MESSAGE_TYPES.GET_POSITION: socketListener = __this.socketPositionUpdateListener; break; default: logger.debug(&quot;add listeners for event type &quot; + parsedMessage.message); } } else { socketListener = __this.socketErrorListener; } if(socketListener) { socketListener.call(null, parsedMessage.data); } } else if(message.type === &quot;binary&quot;) { parsedMessage = atob(message.binaryData); if(__this.socketLiveFeedListener) { __this.socketLiveFeedListener.call(null, utils.convertFeedCsvToJson(parsedMessage)); } } else { logger.debug(&quot;add listeners for message type&quot;+ message.type); } }); resolve(); }); logger.debug(&quot;In socket ---&quot; + JSON.stringify(__this.auth)); socket.connect(utils.getSocketEndpoint(__this.auth)); } else { reject(new Error(&quot;User not authenticated&quot;)) } }); } /** * @method closeSocket * @description Close the socket connection. * @memberOf Upstox * @instance */ Upstox.prototype.closeSocket = function() { if(this.socketConnection) { this.socketConnection.close(); } }; /** * @method on * @description set socket event listeners * @memberOf Upstox * @instance * @param {string} eventName name of the event. * ~~~~ The eventName can be - orderUpdate positionUpdate tradeUpdate liveFeed disconnected error ~~~~ * @param {function} listener function to listen to events * @throws {Error} Unsupported event * @throws {Error} Incorrect Parameter * @example var upstox = new Upstox(&quot;your_apikey&quot;, &quot;your_apiSecretKey&quot;); upstox.getSessionToken(login_credentials) .then((response)=&gt;{ upstox.connectSocket() .then(() =&gt; { //code to set socket listeners upstox.on(&quot;orderUpdate&quot;, function(message) { //message for order updates }); upstox.on(&quot;positionUpdate&quot;, function(message) { //message for position conversion }); upstox.on(&quot;tradeUpdate&quot;, function(message) { //message for trade updates }); upstox.on(&quot;liveFeed&quot;, function(message) { //message for live feed }); upstox.on(&quot;disconnected&quot;, function(message) { //listener after socket connection is disconnected }); upstox.on(&quot;error&quot;, function(error) { //error listener }); }, (err) =&gt; { //handle connection errors }); }); */ Upstox.prototype.on = function(eventName, listener) { var __this = this; if(utils.validateSocketEventParams(eventName, listener)) { switch(eventName) { case constants.EVENTS.ORDER_UPDATE: __this.socketOrderUpdateListener = listener; break; case constants.EVENTS.POSITION_UPDATE: __this.socketPositionUpdateListener = listener; break; case constants.EVENTS.TRADE_UPDATE: __this.socketTradeUpdateListener = listener; break; case constants.EVENTS.LIVE_FEED: __this.socketLiveFeedListener = listener; break; case constants.EVENTS.DISCONNECTED: __this.socketCloseListener = listener; break; case constants.EVENTS.ERROR: __this.socketErrorListener = listener; break; } } }; module.exports.Upstox = Upstox; × Search results Close Documentation generated by JSDoc 3.4.3 on Mon May 22nd 2017 using the DocStrap template. "},"example_example.js.html":{"id":"example_example.js.html","title":"Source: example/example.js","body":" Upstox API Modules Example Classes Upstox Source: example/example.js /** * Created by renuka on 11/4/17. */ /** * 1. Get authentication url provide with getLoginUri. Params required are - apiKey, redirect_uri, response_type * 2. Authenticate with your uccid and password with Upstox . * 3. On completion of authentication user will be redirected to the redirect_uri provided while creating the app on developer console of Upstox. * 4. User need to provide the code added in query param of redirect-uri in getAccessToken method. * 6. getAccessToken method requires following params: { &quot;apiSecret&quot; : &quot;your_apiSecret&quot;, &quot;code&quot; : &quot;your_code_generated_in login&quot;, &quot;grant_type&quot; : &quot;authorization_code&quot;, &quot;redirect_uri&quot; : &quot;your_redirect_uri&quot; }; 7. Set access token by invoking method called setAccessToken(your_access_token); // pass the accessToken generated in response with getAccessToken. * 8. Subsequent services can be called as shown in below * * * Every service returns a promise which will either be resolved or rejected. * * Websocket services are available for following events -[live data, position updates, tradeUpdates, liveFeeds] * * To get an active socket connection use connectSocket Method. * @module Example */ var Upstox = require(&quot;../index&quot;); var upstox = new Upstox(&quot;your_api_key&quot;); var params = { &quot;apiSecret&quot; : &quot;your_apiSecret&quot;, &quot;code&quot; : &quot;your_code_generated_in login&quot;, &quot;grant_type&quot; : &quot;authorization_code&quot;, &quot;redirect_uri&quot; : &quot;your_redirect_uri&quot; }; upstox.getAccessToken(params) .then(function(response) { start(); }) .catch(function(err) { console.log(err); }); start(); function start() { // Fetch holdings. // You can have other api calls here. var loginUrl = upstox.getLoginUri(&quot;your_redirect_uri&quot;); console.log(&quot;**************** loginUri ***********&quot; + loginUrl); // Get Holdings upstox.getHoldings() .then(function(response) { // You got user's holding details. console.log(response); }).catch(function(err) { // Something went wrong. console.log(err); }); // GetProfile upstox.getProfile() .then(function (response) { console.log(response); //done(); }) .catch(function(error){ console.log(&quot;%%%%%%%%%%%%% &quot;, error); //done(error); }); // PlaceOrder Note : default product = I i.e intra day order will be placed. var orderObject = { transaction_type:&quot;b&quot;, exchange:&quot;NSE_EQ&quot;, symbol: &quot;RELIANCE&quot;, quantity: 1, order_type:&quot;m&quot; }; upstox.placeOrder(orderObject) .then(function(response) { // Order details received console.log(response); }) .catch(function(err) { // Something went wrong. console.log(err); }); // Web socket upstox.connectSocket() .then(function(){ upstox.on(&quot;orderUpdate&quot;, function(message) { console.log(&quot;orderUpdate&quot;, message); }); upstox.on(&quot;positionUpdate&quot;, function(message) { //message for position conversion console.log(&quot;positionUpdate&quot;, message); }); upstox.on(&quot;tradeUpdate&quot;, function(message) { //message for trade updates console.log(&quot;tradeUpdate&quot;, message); }); upstox.on(&quot;liveFeed&quot;, function(message) { //message for live feed console.log(&quot;liveFeed&quot;, message); }); // upstox.on(&quot;disconnected&quot;, function(message) { // //listener after socket connection is disconnected // console.log(&quot;disconnected&quot;, message); // }); upstox.on(&quot;error&quot;, function(error) { //error listener console.log(&quot;error&quot;, message); }); }).catch(function(error) { console.log( &quot;******** &quot; , error); }); } × Search results Close Documentation generated by JSDoc 3.4.3 on Mon May 22nd 2017 using the DocStrap template. "},"modules.list.html":{"id":"modules.list.html","title":"Modules","body":" Upstox API Modules Example Classes Upstox Modules Classes Upstox × Search results Close Documentation generated by JSDoc 3.4.3 on Mon May 22nd 2017 using the DocStrap template. "},"classes.list.html":{"id":"classes.list.html","title":"Classes","body":" Upstox API Modules Example Classes Upstox Classes Classes Upstox × Search results Close Documentation generated by JSDoc 3.4.3 on Mon May 22nd 2017 using the DocStrap template. "},"index.html":{"id":"index.html","title":"Index","body":" Upstox API Modules Example Classes Upstox Upstox API Nodejs clientThe official Javascript node client for communicating with the Upstox APIs Upstox Node Js Library provides an easy to use wrapper over the HTTPs APIs. The HTTP calls have been converted to methods and their JSON responses. Moreover we provide websocket connection to get live updates from Upstox APIs. InstallationThis module is installed via npm: npm install --save UpstoxDocumentation Upstox API documentation Getting started with APIAuthentication with Oauth To start using upstox services - ------------------------------ Require Upstox - var Upstox = require(&quot;Upstox&quot;); Craete an upstox object by passing apiKey as a parameter. (Note: apiKey is required field) var upstox = new Upstox(&quot;your apiKey&quot;); 1. Get authentication url with getLoginUri method. Params required are - apiKey, redirect_uri(provided while creating the app on developer console of Upstox), response_type var loginUrl = upstox.getLoginUri(testdata.accessToken.redirect_uri, &quot;code&quot;); 2. Get authenticated with your uccid and password with Upstox. Upstox Login screen will be popup up with which you need to get logged in. 3. On completion of authentication user will be redirected to the redirect_uri with code added in query parameter. 4. Get the accessToken required for getting authenticated for all subsequent API calls. getAccessToken method requires following- var params: { &quot;apiSecret&quot; : &quot;your_apiSecret&quot;, &quot;code&quot; : &quot;your_code_generated_in login&quot;, &quot;grant_type&quot; : &quot;authorization_code&quot;, &quot;redirect_uri&quot; : &quot;your_redirect_uri&quot; }; var accessToken; upstox.getAccessToken(params) .then(function(response) { accessToken = response.access_token; }) .catch(function(err) { // handle error }); 5. Set access token by invoking method called setAccessToken(your_access_token); // pass the accessToken generated in response with getAccessToken. upstox.setToken(accessToken);Examples Subsequent services can be called as shown in below // Fetch holdings. // You can have other api calls here. // Get Holdings upstox.getHoldings() .then(function(response) { // You got user's holding details. }) .catch(function(err) { // Something went wrong. }); // GetProfile upstox.getProfile() .then(function(response) { // You got user's holding details. }) .catch(function(err) { // Something went wrong. }); // PlaceOrder var orderObject = { transaction_type:&quot;b&quot;, exchange:&quot;NSE_EQ&quot;, symbol: &quot;RELIANCE&quot;, quantity: 1, order_type:&quot;m&quot; }; upstox.placeOrder(orderObject) .then(function(response) { // You got user's holding details. }) .catch(function(err) { // Something went wrong. });Websocket Every service returns a promise which will either be resolved or rejected. * * Websocket services are available for following events -[live data, position updates, tradeUpdates, liveFeeds] * * To get an active socket connection use connectSocket Method. // Socket upstox.connectSocket() .then(function(){ // Socket Connection successfull // Now you can setup listeners upstox.on(&quot;orderUpdate&quot;, function(message) { //message for order updates }); upstox.on(&quot;positionUpdate&quot;, function(message) { //message for position conversion }); upstox.on(&quot;tradeUpdate&quot;, function(message) { //message for trade updates }); upstox.on(&quot;liveFeed&quot;, function(message) { //message for live feed }); upstox.on(&quot;disconnected&quot;, function(message) { //listener after socket connection is disconnected }); upstox.on(&quot;error&quot;, function(error) { //error listener }); //You can call upstox.closeSocket() to disconnect }).catch(function(err) { // Something went wrong. })Testnpm test // Please add the oauth token details in testData.jsonLicence Index lib/src/UpstoxAPI.js Author: renuka.misal@rksv.in (RenukaMisal92) Source: src/UpstoxAPI.js, line 1 × Search results Close Documentation generated by JSDoc 3.4.3 on Mon May 22nd 2017 using the DocStrap template. "},"Upstox.html":{"id":"Upstox.html","title":"Class: Upstox","body":" Upstox API Modules Example Classes Upstox Class: Upstox Upstox API client class. You need to initialise a single instance of this class per api_key. This module provides an easy to use wrapper over the HTTP APIs. The HTTP calls have been converted to methods and their JSON responses. Moreover we provide websocket connection APIS to get live updates from Upstox APIs. var Upstox = require(&quot;upstox&quot;); var upstox = new Upstox(&quot;your_apikey&quot;); var params = { &quot;apiSecret&quot; : &quot;your_apiSecret&quot;, &quot;code&quot; : &quot;your_code_generated_in login&quot;, &quot;grant_type&quot; : &quot;authorization_code&quot;, &quot;redirect_uri&quot; : &quot;your_redirect_uri&quot; }; upstox.getAccessToken(params) .then(function(response) { start(); }) .catch(function(err) { console.log(err); }); start(); function start() { // Fetch holdings. // You can have other api calls here. var loginUrl = upstox.getLoginUri(&quot;your_redirect_uri&quot;); console.log(&quot;**************** loginUri ***********&quot; + loginUrl); // Get Holdings upstox.getHoldings() .then(function(response) { // You got user's holding details. console.log(response); }).catch(function(err) { // Something went wrong. console.log(err); }); // GetProfile upstox.getProfile() .then(function (response) { console.log(response); //done(); }) .catch(function(error){ console.log(&quot;%%%%%%%%%%%%% &quot;, error); //done(error); }); // PlaceOrder Note : default product = I i.e intra day order will be placed. var orderObject = { transaction_type:&quot;b&quot;, exchange:&quot;NSE_EQ&quot;, symbol: &quot;RELIANCE&quot;, quantity: 1, order_type:&quot;m&quot; }; upstox.placeOrder(orderObject) .then(function(response) { // Order details received console.log(response); }) .catch(function(err) { // Something went wrong. console.log(err); }); // Web socket upstox.connectSocket() .then(function(){ upstox.on(&quot;orderUpdate&quot;, function(message) { console.log(&quot;orderUpdate&quot;, message); }); upstox.on(&quot;positionUpdate&quot;, function(message) { //message for position conversion console.log(&quot;positionUpdate&quot;, message); }); upstox.on(&quot;tradeUpdate&quot;, function(message) { //message for trade updates console.log(&quot;tradeUpdate&quot;, message); }); upstox.on(&quot;liveFeed&quot;, function(message) { //message for live feed console.log(&quot;liveFeed&quot;, message); }); // upstox.on(&quot;disconnected&quot;, function(message) { // //listener after socket connection is disconnected // console.log(&quot;disconnected&quot;, message); // }); upstox.on(&quot;error&quot;, function(error) { //error listener console.log(&quot;error&quot;, message); }); }).catch(function(error) { console.log( &quot;******** &quot; , error); }); } new Upstox(apiKey) Parameters: Name Type Description apiKey string Assigned to you used to authenticate the developers app Source: src/UpstoxAPI.js, line 16 Example Initialize Upstox object var Upstox = require(&quot;Upstox&quot;); var up = new Upstox(&quot;your_apikey&quot;); Methods setToken(accessToken) method to associate the accessToken with the class object. Parameters: Name Type Description accessToken string Token generated after the users logged in successfully with its Upstox apiKey(username) and password. Source: src/UpstoxAPI.js, line 153 getLoginUri(redirect_uri) Parameters: Name Type Description redirect_uri Redirect_uri specified by you while creating an app Source: src/UpstoxAPI.js, line 166 Returns: Login Url to get authorized. Type string getAccessToken(params) Method to get the session token required to authenticate user Parameters: Name Type Description params object Properties Name Type Description apiSecret string code string redirect_uri string Source: src/UpstoxAPI.js, line 180 Returns: promise getProfile() Method to get the profile details Source: src/UpstoxAPI.js, line 214 Returns: Type res Example { &quot;code&quot;: 200, &quot;status&quot;: &quot;OK&quot;, &quot;timestamp&quot;: &quot;2017-05-16T11:00:04+05:30&quot;, &quot;message&quot;: &quot;success&quot;, &quot;data&quot;: { &quot;client_id&quot;: &quot;990099&quot;, &quot;name&quot;: &quot;Upstox API&quot;, &quot;account_type&quot;: &quot;--&quot;, &quot;pan&quot;: &quot;ABCDE1234F&quot;, &quot;email&quot;: &quot;support@upstox.com&quot;, &quot;phone&quot;: &quot;02261309999&quot;, &quot;dob&quot;: &quot;01/01/2012&quot;, &quot;is_active&quot;: true, &quot;exchanges_enabled&quot;: [ &quot;BSE_EQ&quot;, &quot;NSE_EQ&quot;, &quot;NSE_FO&quot;, &quot;MCX_FO&quot;, &quot;NCD_FO&quot;, &quot;BCD_FO&quot; ], &quot;products_enabled&quot;: [ &quot;OCO&quot;, &quot;D&quot;, &quot;CO&quot;, &quot;I&quot; ], &quot;bank_name&quot;: &quot;State Bank of india&quot;, &quot;bank_account&quot;: &quot;123456789&quot;, } } getHoldings() Get the user's holdings. Source: src/UpstoxAPI.js, line 262 Returns: Type res Example { &quot;code&quot;: 200, &quot;status&quot;: &quot;OK&quot;, &quot;timestamp&quot;: &quot;2017-05-17T10:37:58+05:30&quot;, &quot;message&quot;: &quot;success&quot;, &quot;data&quot;: [ { &quot;instrument&quot;: [ { &quot;exchange&quot;: &quot;NSE_EQ&quot;, &quot;symbol&quot;: &quot;DAAWAT&quot;, &quot;token&quot;: 13816 }, { &quot;exchange&quot;: &quot;BSE_EQ&quot;, &quot;symbol&quot;: &quot;DAAWAT&quot;, &quot;token&quot;: 532783 } ], &quot;product&quot;: &quot;D&quot;, &quot;collateral_type&quot;: &quot;WC&quot;, &quot;cnc_used_quantity&quot;: 0, &quot;quantity&quot;: 1, &quot;collateral_qty&quot;: 0, &quot;haircut&quot;: 25 } ] } getBalance(params) Get the user's account balances for equity and commodity. Parameters: Name Type Description params object Properties Name Type Description type string eq - Equity , com - Commodity Source: src/UpstoxAPI.js, line 305 Returns: Type res Example { &quot;code&quot;: 200, &quot;status&quot;: &quot;OK&quot;, &quot;timestamp&quot;: &quot;2017-05-17T11:00:04+05:30&quot;, &quot;message&quot;: &quot;success&quot;, &quot;data&quot;: { &quot;equity&quot;: { &quot;used_margin&quot;: 0, &quot;unrealized_mtm&quot;: 0, &quot;realized_mtm&quot;: 0, &quot;payin_amount&quot;: 0, &quot;span_margin&quot;: 0, &quot;adhoc_margin&quot;: 12000, &quot;notional_cash&quot;: 0, &quot;available_margin&quot;: 10717.11, &quot;exposure_margin&quot;: 0 }, &quot;commodity&quot;: { &quot;used_margin&quot;: 0, &quot;unrealized_mtm&quot;: 0, &quot;realized_mtm&quot;: 0, &quot;payin_amount&quot;: 0, &quot;span_margin&quot;: 0, &quot;adhoc_margin&quot;: 0, &quot;notional_cash&quot;: 0, &quot;available_margin&quot;: 520.45, &quot;exposure_margin&quot;: 0 } } } getPositions() Get the user's day positions. Source: src/UpstoxAPI.js, line 352 Returns: Type res Example { &quot;code&quot;: 200, &quot;status&quot;: &quot;OK&quot;, &quot;timestamp&quot;: &quot;2017-05-15T14:40:04+05:30&quot;, &quot;message&quot;: &quot;success&quot;, &quot;data&quot;: [ { &quot;exchange&quot;: &quot;NSE_EQ&quot;, &quot;product&quot;: &quot;I&quot;, &quot;symbol&quot;: &quot;RELIANCE&quot;, &quot;token&quot;: 2885, &quot;buy_amount&quot;: 1344.25, &quot;sell_amount&quot;: 0, &quot;buy_quantity&quot;: 1, &quot;sell_quantity&quot;: 0, &quot;cf_buy_amount&quot;: 0, &quot;cf_sell_amount&quot;: 0, &quot;cf_buy_quantity&quot;: 0, &quot;cf_sell_quantity&quot;: 0, &quot;avg_buy_price&quot;: 1344.25, &quot;avg_sell_price&quot;: 0.00, &quot;net_quantity&quot;: 1, &quot;close_price&quot;: 1350.45, &quot;realized_profit&quot;: 0.00, &quot;unrealized_profit&quot;: 3.09 } ] } placeOrder(params) Placing an order Parameters: Name Type Description params object Properties Name Type Argument Description transaction_type string Buy or Sell. b : BUY, s : SELL exchange string The exchange segment symbol string The symbol of the instrument quantity number The quantity of order to buy/sell order_type string The type of order to place. l : Limit Order, m : Market Order price number &lt;optional&gt; The limit price for the order, defaults to 0 trigger_price number &lt;optional&gt; The trigger price for the order, defaults to 0 duration string &lt;optional&gt; The duration of the order (day / ioc) product string &lt;optional&gt; The product (I: Intraday Order, D: Delivery Order, CO: Cover Order,OCO: Bracket Order) disclosed_quantity number &lt;optional&gt; The quantity to disclose is_amo boolean &lt;optional&gt; true: Indicates order is After Market Order, false: Indicates order is normal order stoploss number &lt;optional&gt; The stoploss for OCO order. It is mandatory for OCO. squareoff number &lt;optional&gt; The squareoff or profit taking for OCO order. It is mandatory for OCO. Source: src/UpstoxAPI.js, line 395 Returns: Type res Example { &quot;code&quot;: 200, &quot;status&quot;: &quot;OK&quot;, &quot;timestamp&quot;: &quot;2017-05-17T11:01:45+05:30&quot;, &quot;message&quot;: &quot;success&quot;, &quot;data&quot;: { &quot;exchange&quot;: &quot;NSE_EQ&quot;, &quot;token&quot;: 2885, &quot;symbol&quot;: &quot;RELIANCE&quot;, &quot;product&quot;: &quot;I&quot;, &quot;order_type&quot;: &quot;L&quot;, &quot;duration&quot;: &quot;DAY&quot;, &quot;price&quot;: 1200, &quot;trigger_price&quot;: 0, &quot;quantity&quot;: 1, &quot;disclosed_quantity&quot;: 0, &quot;transaction_type&quot;: &quot;B&quot;, &quot;average_price&quot;: 0, &quot;traded_quantity&quot;: 0, &quot;message&quot;: &quot;&quot;, &quot;exchange_order_id&quot;: &quot;&quot;, &quot;parent_order_id&quot;: &quot;NA&quot;, &quot;order_id&quot;: &quot;170517000028023&quot;, &quot;exchange_time&quot;: &quot;&quot;, &quot;time_in_micro&quot;: &quot;0&quot;, &quot;status&quot;: &quot;put order req received&quot;, &quot;is_amo&quot;: false, &quot;valid_date&quot;: &quot;&quot;, &quot;order_request_id&quot;: &quot;1&quot; } } getOrders() Get the orders placed Source: src/UpstoxAPI.js, line 455 Returns: Type res Example { &quot;code&quot;: 200, &quot;status&quot;: &quot;OK&quot;, &quot;timestamp&quot;: &quot;2017-05-17T11:02:39+05:30&quot;, &quot;message&quot;: &quot;success&quot;, &quot;data&quot;: [ { &quot;exchange&quot;: &quot;NSE_EQ&quot;, &quot;token&quot;: 2885, &quot;symbol&quot;: &quot;RELIANCE&quot;, &quot;product&quot;: &quot;I&quot;, &quot;order_type&quot;: &quot;L&quot;, &quot;duration&quot;: &quot;DAY&quot;, &quot;price&quot;: 1250, &quot;trigger_price&quot;: 0, &quot;quantity&quot;: 1, &quot;disclosed_quantity&quot;: 0, &quot;transaction_type&quot;: &quot;B&quot;, &quot;average_price&quot;: 0, &quot;traded_quantity&quot;: 0, &quot;message&quot;: &quot;&quot;, &quot;exchange_order_id&quot;: &quot;1200000000219469&quot;, &quot;parent_order_id&quot;: &quot;NA&quot;, &quot;order_id&quot;: &quot;170517000003728&quot;, &quot;exchange_time&quot;: &quot;17-May-2017 09:17:43&quot;, &quot;time_in_micro&quot;: &quot;1494992898053855&quot;, &quot;status&quot;: &quot;cancelled&quot;, &quot;is_amo&quot;: false, &quot;valid_date&quot;: &quot;--&quot;, &quot;order_request_id&quot;: &quot;1&quot;, &quot;total_traded_quantity&quot;: 0, &quot;stoploss&quot;: 0, &quot;squareoff&quot;: 0, &quot;trailing_ticks&quot;: 0 } ] } getTrades(params) Get the trades details for a particular order Parameters: Name Type Description params object Properties Name Type Description order_id string the order id for which trade details are to be fetched Source: src/UpstoxAPI.js, line 507 Returns: Type res Example { &quot;code&quot;: 200, &quot;status&quot;: &quot;OK&quot;, &quot;timestamp&quot;: &quot;2017-05-15T14:48:52+05:30&quot;, &quot;message&quot;: &quot;success&quot;, &quot;data&quot;: [ { &quot;exchange&quot;: &quot;NSE_EQ&quot;, &quot;token&quot;: 2885, &quot;symbol&quot;: &quot;RELIANCE&quot;, &quot;product&quot;: &quot;I&quot;, &quot;order_type&quot;: &quot;M&quot;, &quot;transaction_type&quot;: &quot;B&quot;, &quot;traded_quantity&quot;: 1, &quot;exchange_order_id&quot;: &quot;1200000003336976&quot;, &quot;order_id&quot;: &quot;170515000047270&quot;, &quot;exchange_time&quot;: &quot;15-May-2017 13:56:31&quot;, &quot;time_in_micro&quot;: &quot;1494836825761723&quot;, &quot;total_traded_quantity&quot;: 0, &quot;traded_shares&quot;: 0, &quot;traded_price&quot;: 0, &quot;trade_id&quot;: &quot;51345784&quot;, } ] } modifyOrder(params) Modify the order by updating the order quantity Parameters: Name Type Description params Object Properties Name Type Argument Description order_id number The order which is to be modified parent_order_id number &lt;optional&gt; The parent order id in case of CO and OCO orders price number &lt;optional&gt; The limit price for the order, defaults to 0 trigger_price number &lt;optional&gt; The trigger price for the order, defaults to 0 quantity number &lt;optional&gt; The quantity of order disclosed_quantity number &lt;optional&gt; The quantity to disclose valid_date string &lt;optional&gt; The valid date of the order in case of MCX_FO Source: src/UpstoxAPI.js, line 549 Returns: Type res Example { &quot;code&quot;: 200, &quot;status&quot;: &quot;OK&quot;, &quot;timestamp&quot;: &quot;2017-03-27T11:57:02+05:30&quot;, &quot;message&quot;: &quot;success&quot;, &quot;data&quot;: { &quot;exchange&quot;: &quot;NSE_EQ&quot;, &quot;token&quot;: 2885, &quot;symbol&quot;: &quot;RELIANCE&quot;, &quot;product&quot;: &quot;I&quot;, &quot;order_type&quot;: &quot;M&quot;, &quot;duration&quot;: &quot;DAY&quot;, &quot;price&quot;: 0, &quot;trigger_price&quot;: 0, &quot;quantity&quot;: 10, &quot;disclosed_quantity&quot;: 0, &quot;transaction_type&quot;: &quot;B&quot;, &quot;average_price&quot;: 0, &quot;traded_quantity&quot;: 0, &quot;message&quot;: &quot;&quot;, &quot;exchange_order_id&quot;: &quot;&quot;, &quot;parent_order_id&quot;: &quot;NA&quot;, &quot;order_id&quot;: &quot;170327000000003&quot;, &quot;exchange_time&quot;: &quot;&quot;, &quot;time_in_micro&quot;: &quot;1490595778207641&quot;, &quot;status&quot;: &quot;not modified&quot;, &quot;is_amo&quot;: false, &quot;valid_date&quot;: &quot;&quot;, &quot;order_request_id&quot;: &quot;2&quot;, &quot;total_traded_quantity&quot;: 0, &quot;traded_shares&quot;: 0, &quot;traded_price&quot;: 0, &quot;stop_loss&quot;: 0, &quot;square_off&quot;: 0, &quot;trailing_ticks&quot;: 0 } } cancelOrder(params) Cancel the order Parameters: Name Type Description params object Properties Name Type Description order_id number order_id generated after you place an order. Source: src/UpstoxAPI.js, line 613 Returns: Type res Example { &quot;code&quot;: 200, &quot;status&quot;: &quot;OK&quot;, &quot;timestamp&quot;: &quot;2017-03-27T11:38:40+05:30&quot;, &quot;message&quot;: &quot;success&quot;, &quot;data&quot;: { &quot;exchange&quot;: &quot;NSE_EQ&quot;, &quot;token&quot;: 2885, &quot;symbol&quot;: &quot;RELIANCE&quot;, &quot;product&quot;: &quot;I&quot;, &quot;order_type&quot;: &quot;M&quot;, &quot;duration&quot;: &quot;DAY&quot;, &quot;price&quot;: 0, &quot;trigger_price&quot;: 0, &quot;quantity&quot;: 1, &quot;disclosed_quantity&quot;: 1, &quot;transaction_type&quot;: &quot;B&quot;, &quot;average_price&quot;: 0, &quot;traded_quantity&quot;: 0, &quot;message&quot;: &quot;&quot;, &quot;exchange_order_id&quot;: &quot;&quot;, &quot;parent_order_id&quot;: &quot;NA&quot;, &quot;order_id&quot;: &quot;170327000000002&quot;, &quot;exchange_time&quot;: &quot;&quot;, &quot;time_in_micro&quot;: &quot;1490594676511489&quot;, &quot;status&quot;: &quot;not cancelled&quot;, &quot;is_amo&quot;: false, &quot;valid_date&quot;: &quot;&quot;, &quot;order_request_id&quot;: &quot;2&quot;, &quot;total_traded_quantity&quot;: 0, &quot;traded_shares&quot;: 0, &quot;traded_price&quot;: 0, &quot;stop_loss&quot;: 0, &quot;square_off&quot;: 0, &quot;trailing_ticks&quot;: 0 } } getMasterContract(params) Download the master contract as csv. The master contract contains all necessary information about all available contracts. Gets all contracts or filter contracts by exchange segment. Parameters: Name Type Description params object Properties Name Type Argument Description exchange string &lt;optional&gt; name of the exchange to get specific BOD details eg : The exchange segment params.exchange can be - bse_eq (BSE Equity) bcd_fo (BSE Futures &amp; Options) nse_eq (NSE Equity) nse_fo (NSE Futures &amp; Options) ncd_fo (NSE Currency Futures &amp; Options) Source: src/UpstoxAPI.js, line 672 Returns: Type res Example { &quot;code&quot;: 200, &quot;status&quot;: &quot;OK&quot;, &quot;timestamp&quot;: &quot;2017-03-07T15:33:08+05:30&quot;, &quot;message&quot;: &quot;success&quot;, &quot;data&quot;:[ &quot;exchange,token,parent_token,symbol,name,closing_price,expiry,strike_price,tick_size,lot_size,instrument_type&quot;, &quot;NSE_EQ,19262,,1,LTAMC - 1,,,,1,1,&quot;, &quot;NSE_EQ,10104,,1IADD,DHFL PRAMERICA MF - HYBRI,,,,1,1,&quot;, &quot;NSE_EQ,10105,,1ID1G,DHFL PRAMERICA MF - HYBRI,,,,1,1,&quot;, &quot;NSE_EQ,10106,,1ID2D,DHFL PRAMERICA MF - HYBRI,,,,1,1,&quot;, ..... ] } getLiveFeed(params) Get Instruments list Parameters: Name Type Description params object Properties Name Type Argument Description exchange string name of the exchange to get live feeds of. eg: The exchange segment params.exchange can be - bse_eq (BSE Equity) bcd_fo (BSE Futures &amp; Options) nse_eq (NSE Equity) nse_fo (NSE Futures &amp; Options) ncd_fo (NSE Currency Futures &amp; Options) symbol string The symbol of the instrument. This must match exactly as given in the master contract csv. eg: reliance type string type of feed. eg: &quot;ltp&quot;, &quot;full&quot; format string &lt;optional&gt; Response format json/csv Source: src/UpstoxAPI.js, line 718 Returns: Type res Example ~~~ If you request for LTP, following will be the response { &quot;code&quot;: 200, &quot;status&quot;: &quot;OK&quot;, &quot;timestamp&quot;: &quot;2017-05-15T16:45:12+05:30&quot;, &quot;message&quot;: &quot;feed&quot;, &quot;data&quot;: { &quot;timestamp&quot;: 1494843956000, &quot;exchange&quot;: &quot;NSE_EQ&quot;, &quot;symbol&quot;: &quot;RELIANCE&quot;, &quot;ltp&quot;: 1344.1, &quot;close&quot;: 1350.45 } } ~~~ If you request for Mini, following will be the response { &quot;code&quot;: 200, &quot;status&quot;: &quot;OK&quot;, &quot;timestamp&quot;: &quot;2017-05-15T15:10:12+05:30&quot;, &quot;message&quot;: &quot;feed&quot;, &quot;data&quot;: { &quot;timestamp&quot;: 1494837991000, &quot;exchange&quot;: &quot;NSE_FO&quot;, &quot;symbol&quot;: &quot;NIFTY17MAYFUT&quot;, &quot;ltp&quot;: 9446.8, &quot;open&quot;: 9448, &quot;high&quot;: 9454.4, &quot;low&quot;: 9437, &quot;close&quot;: 9414.8, &quot;vtt&quot;: 2802525, &quot;atp&quot;: 9446.71, &quot;oi&quot;: 21256725, &quot;spot_price&quot;: 9442.5, &quot;total_buy_qty&quot;: 831075, &quot;total_sell_qty&quot;: 858375, &quot;bids&quot;: [ { &quot;quantity&quot;: 900, &quot;price&quot;: 9446.7, &quot;orders&quot;: 2 } ], &quot;asks&quot;: [ { &quot;quantity&quot;: 450, &quot;price&quot;: 9447, &quot;orders&quot;: 1 } ] } } ~~~ If you request for Full, following will be the response { &quot;code&quot;: 200, &quot;status&quot;: &quot;OK&quot;, &quot;timestamp&quot;: &quot;2017-05-15T15:10:42+05:30&quot;, &quot;message&quot;: &quot;feed&quot;, &quot;data&quot;: { &quot;timestamp&quot;: 1494837991000, &quot;exchange&quot;: &quot;NSE_FO&quot;, &quot;symbol&quot;: &quot;NIFTY17MAYFUT&quot;, &quot;ltp&quot;: 9446.8, &quot;open&quot;: 9448, &quot;high&quot;: 9454.4, &quot;low&quot;: 9437, &quot;close&quot;: 9414.8, &quot;vtt&quot;: 2802525, &quot;atp&quot;: 9446.71, &quot;oi&quot;: 21256725, &quot;spot_price&quot;: 9442.15, &quot;total_buy_qty&quot;: 830925, &quot;total_sell_qty&quot;: 858375, &quot;lower_circuit&quot;: 8473.35, &quot;upper_circuit&quot;: 10356.3, &quot;bids&quot;: [ { &quot;quantity&quot;: 900, &quot;price&quot;: 9446.7, &quot;orders&quot;: 2 }, { &quot;quantity&quot;: 75, &quot;price&quot;: 9446.65, &quot;orders&quot;: 1 }, { &quot;quantity&quot;: 1050, &quot;price&quot;: 9446.6, &quot;orders&quot;: 4 }, { &quot;quantity&quot;: 150, &quot;price&quot;: 9446.55, &quot;orders&quot;: 1 }, { &quot;quantity&quot;: 75, &quot;price&quot;: 9446.1, &quot;orders&quot;: 1 } ], &quot;asks&quot;: [ { &quot;quantity&quot;: 450, &quot;price&quot;: 9447, &quot;orders&quot;: 1 }, { &quot;quantity&quot;: 450, &quot;price&quot;: 9447.3, &quot;orders&quot;: 1 }, { &quot;quantity&quot;: 900, &quot;price&quot;: 9447.4, &quot;orders&quot;: 1 }, { &quot;quantity&quot;: 75, &quot;price&quot;: 9447.45, &quot;orders&quot;: 1 }, { &quot;quantity&quot;: 75, &quot;price&quot;: 9447.55, &quot;orders&quot;: 1 } ] } } ~~~ getOHLC(params) Get the OHLC candle values for a given instrument Parameters: Name Type Description params Properties Name Type Argument Description exchange string name of the exchange to get live feeds of. eg: The exchange segment params.exchange can be - bse_eq (BSE Equity) bcd_fo (BSE Futures &amp; Options) nse_eq (NSE Equity) nse_fo (NSE Futures &amp; Options) ncd_fo (NSE Currency Futures &amp; Options) symbol string The symbol of the instrument. This must match exactly as given in the master contract csv eg: reliance interval string &lt;optional&gt; Default: 1day 1MINUTE 5MINUTE 10MINUTE 30MINUTE 60MINUTE 1DAY 1WEEK 1MONTH start_date string &lt;optional&gt; Default: 15 days before today Date format: DD-MM-YYYY end_date string &lt;optional&gt; Default: today Date format: DD-MM-YYYY format string &lt;optional&gt; Default: json csv json Source: src/UpstoxAPI.js, line 893 Returns: Type res Example { &quot;code&quot;: 200, &quot;status&quot;: &quot;OK&quot;, &quot;timestamp&quot;: &quot;&quot;, &quot;message&quot;: &quot;ohlc&quot;, &quot;data&quot;: [ { &quot;timestamp&quot;: 1485973800000, &quot;open&quot;: 1050, &quot;high&quot;: 1050.8, &quot;low&quot;: 1038.25, &quot;close&quot;: 1043.5, &quot;volume&quot;: 2079908, &quot;cp&quot;: 1045.55 } ] } subscribeFeed(params) Subscribe to a live feed for a given exchange and set of symbols Parameters: Name Type Description params Properties Name Type Description exchange string name of the exchange to get live feeds of. eg: The exchange segment params.exchange can be - bse_eq (BSE Equity) bcd_fo (BSE Futures &amp; Options) nse_eq (NSE Equity) nse_fo (NSE Futures &amp; Options) ncd_fo (NSE Currency Futures &amp; Options) symbol string The symbol of the instrument. This must match exactly as given in the master contract csv. The symbol can have multiple symbols, separated by comma eg: reliance type string The type of feed &quot;ltp&quot; or &quot;full&quot; Source: src/UpstoxAPI.js, line 964 Returns: Type res unsubscribeFeed(params) Unsubscribe from a live feed for a given exchange and set of symbols Parameters: Name Type Description params Properties Name Type Description exchange string name of the exchange to get live feeds of. eg: The exchange segment params.exchange can be - bse_eq (BSE Equity) bcd_fo (BSE Futures &amp; Options) nse_eq (NSE Equity) nse_fo (NSE Futures &amp; Options) ncd_fo (NSE Currency Futures &amp; Options) symbol string The symbol of the instrument. This must match exactly as given in the master contract csv. The symbol can have multiple symbols, separated by comma eg: reliance type string The type of feed &quot;ltp&quot; or &quot;full&quot; Source: src/UpstoxAPI.js, line 994 Returns: Type res connectSocket() Connect to web socket server. Source: src/UpstoxAPI.js, line 1024 Throws: User not autheticated Type Error Connection Error Type Error Returns: promise Example var upstox = new Upstox(&quot;your_apikey&quot;, &quot;your_apiSecretKey&quot;); upstox.getSessionToken(login_credentials) .then((response)=&gt;{ upstox.connectSocket() .then(() =&gt; { //code to set socket listeners }, (err) =&gt; { //handle connection errors }); }); closeSocket() Close the socket connection. Source: src/UpstoxAPI.js, line 1117 on(eventName, listener) set socket event listeners Parameters: Name Type Description eventName string name of the event. The eventName can be - orderUpdate positionUpdate tradeUpdate liveFeed disconnected error listener function function to listen to events Source: src/UpstoxAPI.js, line 1129 Throws: Unsupported event Type Error Incorrect Parameter Type Error Example var upstox = new Upstox(&quot;your_apikey&quot;, &quot;your_apiSecretKey&quot;); upstox.getSessionToken(login_credentials) .then((response)=&gt;{ upstox.connectSocket() .then(() =&gt; { //code to set socket listeners upstox.on(&quot;orderUpdate&quot;, function(message) { //message for order updates }); upstox.on(&quot;positionUpdate&quot;, function(message) { //message for position conversion }); upstox.on(&quot;tradeUpdate&quot;, function(message) { //message for trade updates }); upstox.on(&quot;liveFeed&quot;, function(message) { //message for live feed }); upstox.on(&quot;disconnected&quot;, function(message) { //listener after socket connection is disconnected }); upstox.on(&quot;error&quot;, function(error) { //error listener }); }, (err) =&gt; { //handle connection errors }); }); × Search results Close Documentation generated by JSDoc 3.4.3 on Mon May 22nd 2017 using the DocStrap template. "},"module-Example.html":{"id":"module-Example.html","title":"Module: Example","body":" Upstox API Modules Example Classes Upstox Module: Example Get authentication url provide with getLoginUri. Params required are - apiKey, redirect_uri, response_type Authenticate with your uccid and password with Upstox . On completion of authentication user will be redirected to the redirect_uri provided while creating the app on developer console of Upstox. User need to provide the code added in query param of redirect-uri in getAccessToken method. getAccessToken method requires following params: { &quot;apiSecret&quot; : &quot;your_apiSecret&quot;, &quot;code&quot; : &quot;your_code_generated_in login&quot;, &quot;grant_type&quot; : &quot;authorization_code&quot;, &quot;redirect_uri&quot; : &quot;your_redirect_uri&quot; }; Set access token by invoking method called setAccessToken(your_access_token); // pass the accessToken generated in response with getAccessToken. Subsequent services can be called as shown in below Every service returns a promise which will either be resolved or rejected. Websocket services are available for following events -[live data, position updates, tradeUpdates, liveFeeds] To get an active socket connection use connectSocket Method. Source: example/example.js, line 5 × Search results Close Documentation generated by JSDoc 3.4.3 on Mon May 22nd 2017 using the DocStrap template. "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
