<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"src_UpstoxAPI.js.html":{"id":"src_UpstoxAPI.js.html","title":"Source: src/UpstoxAPI.js","body":" Upstox API Modules Example Classes Upstox Source: src/UpstoxAPI.js /** * @fileoverview * @author renuka.misal@rksv.in (RenukaMisal92) */ // External Dependencies var _ = require('lodash'); var promise = require('bluebird'); var WebSocketClient = require('websocket').client; var atob = require('atob'); // Internal Dependencies var utils = require('./../utils/helper.js'); var logger = new utils.Logger(); var constants = require(&quot;./constants.json&quot;); /** * @classdesc API client class. You need to initialise a single instance of this class per `api_key`. * This module provides an easy to use wrapper over the HTTP APIs. * The HTTP calls have been converted to methods and their JSON responses. * Moreover we provide websocket connection APIS to get live updates from Upstox APIs. * ~~~~ * * var Upstox = require(&quot;upstox&quot;); * var up = new Upstox(&quot;your_apikey&quot;, &quot;your_apiSecretKey&quot;); * up.getSessionToken({ * &quot;username&quot;: &quot;your_clientId&quot;, * &quot;password&quot;: &quot;password&quot; * }) * .then(function(response) { * start(); * }) * .catch(function(err) { * logger.debug(err.response); * }) * * start(){ * up.getProfile() * .then(function(response){ * //get the result here * }) * .catch(function(error){ * //catch the error here * }); * up.connectSocket() * .then(function(){ * // Socket Connection successfull * // Now you can setup listeners * * up.on(&quot;orderUpdate&quot;, function(message) { * //message for order updates * }); * up.on(&quot;positionUpdate&quot;, function(message) { * //message for position conversion * }); * up.on(&quot;tradeUpdate&quot;, function(message) { * //message for trade updates * }); * up.on(&quot;liveFeed&quot;, function(message) { * //message for live feed * }); * up.on(&quot;disconnected&quot;, function(message) { * //listener after socket connection is disconnected * }); * up.on(&quot;error&quot;, function(error) { * //error listener * }); * //You can call up.closeSocket() to disconnect * }).catch(function(err){ * // Something went wrong. * }); * } * ~~~~ * * @constructor * @name Upstox * @param {string} client_id Assigned to you used to authenticate the developers app * @param {string} [accessToken] SessionId generated after successfully logging to upstox API. * @example &lt;caption&gt;Initialize Upstox object&lt;/caption&gt; * var Upstox = require(&quot;Upstox&quot;); * var up = new Upstox(&quot;your_apikey&quot;, &quot;your_apiSecretKey&quot;); * */ function Upstox(client_id, accessToken) { /** * @type {{client_id: *, client_secret: *, accessToken: *}} * @memberOf Upstox */ this.auth = { client_id: client_id, accessToken : accessToken, userId: null }; this.isAuthenticated = false; this.socketOrderUpdateListener; this.socketPositionUpdateListener; this.socketTradeUpdateListener; this.socketLiveFeedListener; this.socketCloseListener; this.socketErrorListener; this.socketConnection; } /** * @method setToken * @description method to associate the accessToken with the class object. * @memberOf Upstox * @instance * @param {string} accessToken Token generated after the users logged in successfully with its Upstox client_id(username) and password. */ Upstox.prototype.setToken = function(accessToken){ var __this = this; __this.auth.accessToken = accessToken; }; /** * @private * @method setUserId * @description method to associate the userId with the instance. * @memberOf Upstox * @instance * @param {string} userId Upstox client_id(username). */ Upstox.prototype.setUserId = function(userId){ var __this = this; __this.auth.accessToken.userId = userId; }; /** * @method getLoginUri * @memberOf Upstox * @param client_id Assigned to you used to authenticate the developers app * @param redirect_uri Redirect_uri specified by you while creating an app * @param response_type Th response_type should be &quot;code&quot; * @instance * @return {string} Login Url to get authorized. */ Upstox.prototype.getLoginUri = function(client_id, redirect_uri, response_type){ var urLDetails = utils.generateUrl('authorize', null); return urLDetails.host + urLDetails.path + &quot;?client_id=&quot; + client_id + &quot;&amp;redirect_uri=&quot; + redirect_uri + &quot;&amp;response_type=&quot; + response_type; }; /** * @method getSessionToken * @description Method to get the session token required to authenticate user * @memberOf Upstox * @instance * @param {object} params * @param {string} params.client_id valid client id for UPSTOX * @param {string} params.client_secret * @param {string} params.code * @param {string} params.grantType * @param {string} params.redirect_uri * @return promise */ Upstox.prototype.getAccessToken = function(params) { var HTTP_METHOD = &quot;POST&quot;; var __this = this, accessToken; var basicAuth = &quot;Basic &quot; + new Buffer(params.client_id + ':' + params.client_secret).toString('base64'); logger.debug(&quot;Check baseAuth&quot; + basicAuth); delete(params.client_id); delete(params.client_secret); return new promise(function (resolve, reject) { utils.restify(&quot;accessToken&quot;, HTTP_METHOD, params, null, {basicAuth: basicAuth}) .then(function (response) { logger.debug(&quot;*****************&quot;, response); __this.setToken(response.access_token); //__this.setUserId(params.username); __this.isAuthenticated = true; resolve(response); }) .catch(function (err) { logger.error(&quot;*****************&quot;, err); reject(err); }); }); }; /** * @method getProfile * @description Method to get the profile details *@instance * @memberOf Upstox * @return {res} * @example * { &quot;code&quot;: 200, &quot;status&quot;: &quot;OK&quot;, &quot;timestamp&quot;: &quot;2017-03-07T12:39:00+05:30&quot;, &quot;message&quot;: &quot;success&quot;, &quot;data&quot;:{ &quot;client_id&quot;: &quot;1203&quot;, &quot;name&quot;: &quot;xyz&quot;, &quot;account_type&quot;: &quot;--&quot;, &quot;pan&quot;: &quot;ABCDERYTUIU&quot;, &quot;email&quot;: &quot;xyz@gmail.com&quot;, &quot;phone&quot;: &quot;&quot;, &quot;nse_pcode&quot;: &quot;&quot;, &quot;bse_pcode&quot;: &quot;&quot;, &quot;bse_custodian_code&quot;: &quot;&quot;, &quot;dp_account_number&quot;: &quot;--&quot;, &quot;dob&quot;: &quot;14/10/2001&quot;, &quot;is_active&quot;: true, &quot;exchanges_enabled&quot;:[&quot;BSE_EQ&quot;, &quot;NSE_EQ&quot;, &quot;NSE_FO&quot;, &quot;NCD_FO&quot;, &quot;BCD_FO&quot;], &quot;products_enabled&quot;:[&quot;OCO&quot;, &quot;D&quot;, &quot;CO&quot;, &quot;I&quot;] } } */ Upstox.prototype.getProfile = function () { var __this = this; var HTTP_METHOD = &quot;GET&quot;; return utils.restify(&quot;profile&quot;, HTTP_METHOD, null, __this.auth.accessToken ); }; /** * @method getHoldings * @description Get the user's holdings. * @instance * @memberOf Upstox * @return {res} * @example * { &quot;code&quot;: 200, &quot;status&quot;: &quot;OK&quot;, &quot;timestamp&quot;: &quot;2017-03-07T15:47:22+05:30&quot;, &quot;message&quot;: &quot;get_holdings&quot;, &quot;data&quot;:[] } */ Upstox.prototype.getHoldings = function () { var __this = this; var HTTP_METHOD = &quot;GET&quot;; return utils.restify(&quot;holdings&quot;, HTTP_METHOD, null, __this.auth.accessToken); }; /** * @method getBalance * @instance * @description Get the user's account balances for equity and commodity. * @memberOf Upstox * @example * { &quot;code&quot;: 200, &quot;status&quot;: &quot;OK&quot;, &quot;timestamp&quot;: &quot;2017-03-07T15:43:40+05:30&quot;, &quot;message&quot;: &quot;success&quot;, &quot;data&quot;:{ &quot;equity&quot;:{&quot;used_margin&quot;: 149.62875, &quot;unrealized_mtm&quot;: 0, &quot;realized_mtm&quot;: 0, &quot;payin_amount&quot;: 878000, &quot;span_margin&quot;: 0,…}, &quot;commodity&quot;:{&quot;used_margin&quot;: 0, &quot;unrealized_mtm&quot;: 0, &quot;realized_mtm&quot;: 0, &quot;payin_amount&quot;: 10000, &quot;span_margin&quot;: 0,…} } } * @param {object} params * @param {string} params.type eq - Equity , com - Commodity * @return {res} */ Upstox.prototype.getBalance = function () { var __this = this; var HTTP_METHOD = &quot;GET&quot;; return utils.restify(&quot;balance&quot;, HTTP_METHOD, null, __this.auth.accessToken); }; /** * @method getPositions * @instance * @description Get the user's day positions. * @memberOf Upstox * @return {res} * @example * { &quot;code&quot;: 200, &quot;status&quot;: &quot;OK&quot;, &quot;timestamp&quot;: &quot;2017-03-07T15:39:07+05:30&quot;, &quot;message&quot;: &quot;get_positions&quot;, &quot;data&quot;: [ { &quot;exchange&quot;: &quot;NSE_EQ&quot;, &quot;token&quot;: &quot;2885&quot;, &quot;product&quot;: &quot;I&quot;, &quot;fill_buy_amount&quot;: &quot;1015.00&quot;, &quot;fill_sell_amount&quot;: &quot;0&quot;, &quot;fill_buy_cf_amount&quot;: &quot;0&quot;, &quot;fill_sell_cf_amount&quot;: &quot;0&quot;, &quot;fill_buy_cf_qty&quot;: 0, &quot;fill_sell_quantity&quot;: 0, &quot;fill_buy_quantity&quot;: 1, &quot;fill_sell_cf_qty&quot;: 0 } ] } */ Upstox.prototype.getPositions = function () { var __this = this; var HTTP_METHOD = &quot;GET&quot;; return utils.restify(&quot;positions&quot;, HTTP_METHOD, null, __this.auth.accessToken); }; /** * @method placeOrder * @description Placing an order * @memberOf Upstox * @instance * @param {object} params * @param {string} params.transaction_type Buy or Sell. b : BUY, s : SELL * @param {string} params.exchange The exchange segment * @param {string} params.symbol The symbol of the instrument * @param {number} params.quantity The quantity of order to buy/sell * @param {string} params.order_type The type of order to place. l : Limit Order, m : Market Order * @param {number} [params.price] The limit price for the order, defaults to 0 * @param {number} [params.trigger_price] The trigger price for the order, defaults to 0 * @param {string} [params.duration] The duration of the order (day / ioc) * @param {string} [params.product] The product (I: Intraday Order, D: Delivery Order, CO: Cover Order,OCO: Bracket Order) * @param {number} [params.disclosed_quantity] The quantity to disclose * @param {boolean} [params.is_amo] true: Indicates order is After Market Order, false: Indicates order is normal order * @param {number} [params.stoploss] The stoploss for OCO order. It is mandatory for OCO. * @param {number} [params.squareoff] The squareoff or profit taking for OCO order. It is mandatory for OCO. * @return {res} * @example * { &quot;code&quot;: 200, &quot;status&quot;: &quot;OK&quot;, &quot;timestamp&quot;: &quot;2017-03-07T15:49:27+05:30&quot;, &quot;message&quot;: &quot;success&quot;, &quot;data&quot;:{ &quot;exchange&quot;: &quot;NSE_EQ&quot;, &quot;token&quot;: 2885, &quot;symbol&quot;: &quot;RELIANCE&quot;, &quot;product&quot;: &quot;I&quot;, &quot;order_type&quot;: &quot;M&quot;, &quot;duration&quot;: &quot;DAY&quot;, &quot;price&quot;: 0, &quot;trigger_price&quot;: 0, &quot;quantity&quot;: 1, &quot;disclosed_quantity&quot;: 1, &quot;transaction_type&quot;: &quot;B&quot;, &quot;average_price&quot;: 0, &quot;traded_quantity&quot;: 0, &quot;message&quot;: &quot;&quot;, &quot;exchange_order_id&quot;: &quot;&quot;, &quot;parent_order_id&quot;: &quot;NA&quot;, &quot;order_id&quot;: &quot;170307000000021&quot;, &quot;exchange_time&quot;: &quot;&quot;, &quot;time_in_micro&quot;: &quot;0&quot;, &quot;status&quot;: &quot;put order req received&quot;, &quot;is_amo&quot;: false, &quot;valid_date&quot;: &quot;&quot;, &quot;order_request_id&quot;: &quot;1&quot;, &quot;total_traded_quantity&quot;: 0, &quot;traded_shares&quot;: 0, &quot;traded_price&quot;: 0, &quot;stop_loss&quot;: 0, &quot;square_off&quot;: 0, &quot;trailing_ticks&quot;: 0 } } */ Upstox.prototype.placeOrder = function(params){ var __this = this; var HTTP_METHOD = &quot;POST&quot;; return utils.restify(&quot;placeOrder&quot;, HTTP_METHOD, params, __this.auth.accessToken); }; /** * Get the orders placed * @method getOrders * @instance * @memberOf Upstox * @return {res} * @example { &quot;code&quot;: 200, &quot;status&quot;: &quot;OK&quot;, &quot;timestamp&quot;: &quot;2017-03-28T17:01:02+05:30&quot;, &quot;message&quot;: &quot;success&quot;, &quot;data&quot;: [ { &quot;exchange&quot;: &quot;NSE_EQ&quot;, &quot;token&quot;: 4067, &quot;symbol&quot;: &quot;MARICO&quot;, &quot;product&quot;: &quot;I&quot;, &quot;order_type&quot;: &quot;L&quot;, &quot;duration&quot;: &quot;GTC&quot;, &quot;price&quot;: 250.5, &quot;trigger_price&quot;: 0, &quot;quantity&quot;: 10, &quot;disclosed_quantity&quot;: 0, &quot;transaction_type&quot;: &quot;B&quot;, &quot;average_price&quot;: 0, &quot;traded_quantity&quot;: 0, &quot;message&quot;: &quot;16273 : Does not exist&quot;, &quot;exchange_order_id&quot;: &quot;1100000000057116&quot;, &quot;parent_order_id&quot;: &quot;NA&quot;, &quot;order_id&quot;: &quot;161026000000007&quot;, &quot;exchange_time&quot;: &quot;08-Mar-2017 16:12:47&quot;, &quot;time_in_micro&quot;: &quot;1488969541034779&quot;, &quot;status&quot;: &quot;open&quot;, &quot;is_amo&quot;: false, &quot;valid_date&quot;: &quot;--&quot;, &quot;order_request_id&quot;: &quot;4&quot;, &quot;total_traded_quantity&quot;: 0, &quot;traded_shares&quot;: 0, &quot;traded_price&quot;: 0, &quot;stop_loss&quot;: 0, &quot;square_off&quot;: 0, &quot;trailing_ticks&quot;: 0 }, { &quot;exchange&quot;: &quot;NSE_EQ&quot;, &quot;token&quot;: 2885, &quot;symbol&quot;: &quot;RELIANCE&quot;, &quot;product&quot;: &quot;I&quot;, &quot;order_type&quot;: &quot;L&quot;, &quot;duration&quot;: &quot;DAY&quot;, &quot;price&quot;: 1080, &quot;trigger_price&quot;: 0, &quot;quantity&quot;: 1, &quot;disclosed_quantity&quot;: 0, &quot;transaction_type&quot;: &quot;B&quot;, &quot;average_price&quot;: 1080, &quot;traded_quantity&quot;: 1, &quot;message&quot;: &quot;&quot;, &quot;exchange_order_id&quot;: &quot;1100000000006972&quot;, &quot;parent_order_id&quot;: &quot;NA&quot;, &quot;order_id&quot;: &quot;170328000000030&quot;, &quot;exchange_time&quot;: &quot;28-Mar-2017 12:42:42&quot;, &quot;time_in_micro&quot;: &quot;1490697859120172&quot;, &quot;status&quot;: &quot;complete&quot;, &quot;is_amo&quot;: false, &quot;valid_date&quot;: &quot;--&quot;, &quot;order_request_id&quot;: &quot;1&quot;, &quot;total_traded_quantity&quot;: 0, &quot;traded_shares&quot;: 0, &quot;traded_price&quot;: 0, &quot;stop_loss&quot;: 0, &quot;square_off&quot;: 0, &quot;trailing_ticks&quot;: 0 } ] } */ Upstox.prototype.getOrders = function(){ var __this = this; var HTTP_METHOD = &quot;GET&quot;; return utils.restify(&quot;getOrders&quot;, HTTP_METHOD, null, __this.auth.accessToken) }; /** * Get the trades details for a particular order * @method getTradesInfo * @instance * @param {object} params * @param {string} params.order_id the order id for which trade details are to be fetched * @memberOf Upstox * @return {res} * @example { &quot;code&quot;: 200, &quot;status&quot;: &quot;OK&quot;, &quot;timestamp&quot;: &quot;2017-03-28T18:19:24+05:30&quot;, &quot;message&quot;: &quot;success&quot;, &quot;data&quot;: [ { &quot;exchange&quot;: &quot;NSE_EQ&quot;, &quot;token&quot;: 2885, &quot;symbol&quot;: &quot;RELIANCE&quot;, &quot;product&quot;: &quot;I&quot;, &quot;order_type&quot;: &quot;M&quot;, &quot;price&quot;: null, &quot;trigger_price&quot;: null, &quot;quantity&quot;: null, &quot;disclosed_quantity&quot;: null, &quot;transaction_type&quot;: &quot;B&quot;, &quot;average_price&quot;: null, &quot;traded_quantity&quot;: 1, &quot;exchange_order_id&quot;: &quot;1100000000020501&quot;, &quot;order_id&quot;: &quot;170328000000054&quot;, &quot;exchange_time&quot;: &quot;28-Mar-2017 18:04:22&quot;, &quot;time_in_micro&quot;: &quot;1490704218023191&quot;, &quot;status&quot;: &quot;complete&quot;, &quot;total_traded_quantity&quot;: 0, &quot;traded_shares&quot;: 0, &quot;traded_price&quot;: 0, &quot;trade_id&quot;: &quot;50031226&quot;, &quot;stop_loss&quot;: 0, &quot;square_off&quot;: 0, &quot;trailing_ticks&quot;: 0 }, { &quot;exchange&quot;: &quot;NSE_EQ&quot;, &quot;token&quot;: 2885, &quot;symbol&quot;: &quot;RELIANCE&quot;, &quot;product&quot;: &quot;I&quot;, &quot;order_type&quot;: &quot;M&quot;, &quot;price&quot;: null, &quot;trigger_price&quot;: null, &quot;quantity&quot;: null, &quot;disclosed_quantity&quot;: null, &quot;transaction_type&quot;: &quot;B&quot;, &quot;average_price&quot;: null, &quot;traded_quantity&quot;: 1, &quot;exchange_order_id&quot;: &quot;1100000000020532&quot;, &quot;order_id&quot;: &quot;170328000000055&quot;, &quot;exchange_time&quot;: &quot;28-Mar-2017 18:04:40&quot;, &quot;time_in_micro&quot;: &quot;1490704235700345&quot;, &quot;status&quot;: &quot;complete&quot;, &quot;total_traded_quantity&quot;: 0, &quot;traded_shares&quot;: 0, &quot;traded_price&quot;: 0, &quot;trade_id&quot;: &quot;50031308&quot;, &quot;stop_loss&quot;: 0, &quot;square_off&quot;: 0, &quot;trailing_ticks&quot;: 0 }, { &quot;exchange&quot;: &quot;NSE_EQ&quot;, &quot;token&quot;: 2885, &quot;symbol&quot;: &quot;RELIANCE&quot;, &quot;product&quot;: &quot;I&quot;, &quot;order_type&quot;: &quot;M&quot;, &quot;price&quot;: null, &quot;trigger_price&quot;: null, &quot;quantity&quot;: null, &quot;disclosed_quantity&quot;: null, &quot;transaction_type&quot;: &quot;B&quot;, &quot;average_price&quot;: null, &quot;traded_quantity&quot;: 1, &quot;exchange_order_id&quot;: &quot;1100000000019491&quot;, &quot;order_id&quot;: &quot;170328000000049&quot;, &quot;exchange_time&quot;: &quot;28-Mar-2017 17:58:14&quot;, &quot;time_in_micro&quot;: &quot;1490703850303152&quot;, &quot;status&quot;: &quot;complete&quot;, &quot;total_traded_quantity&quot;: 0, &quot;traded_shares&quot;: 0, &quot;traded_price&quot;: 0, &quot;trade_id&quot;: &quot;50028841&quot;, &quot;stop_loss&quot;: 0, &quot;square_off&quot;: 0, &quot;trailing_ticks&quot;: 0 }, { &quot;exchange&quot;: &quot;NSE_EQ&quot;, &quot;token&quot;: 2885, &quot;symbol&quot;: &quot;RELIANCE&quot;, &quot;product&quot;: &quot;I&quot;, &quot;order_type&quot;: &quot;M&quot;, &quot;price&quot;: null, &quot;trigger_price&quot;: null, &quot;quantity&quot;: null, &quot;disclosed_quantity&quot;: null, &quot;transaction_type&quot;: &quot;B&quot;, &quot;average_price&quot;: null, &quot;traded_quantity&quot;: 1, &quot;exchange_order_id&quot;: &quot;1100000000019490&quot;, &quot;order_id&quot;: &quot;170328000000048&quot;, &quot;exchange_time&quot;: &quot;28-Mar-2017 17:58:12&quot;, &quot;time_in_micro&quot;: &quot;1490703847853846&quot;, &quot;status&quot;: &quot;complete&quot;, &quot;total_traded_quantity&quot;: 0, &quot;traded_shares&quot;: 0, &quot;traded_price&quot;: 0, &quot;trade_id&quot;: &quot;50028824&quot;, &quot;stop_loss&quot;: 0, &quot;square_off&quot;: 0, &quot;trailing_ticks&quot;: 0 }, { &quot;exchange&quot;: &quot;NSE_EQ&quot;, &quot;token&quot;: 2885, &quot;symbol&quot;: &quot;RELIANCE&quot;, &quot;product&quot;: &quot;I&quot;, &quot;order_type&quot;: &quot;M&quot;, &quot;price&quot;: null, &quot;trigger_price&quot;: null, &quot;quantity&quot;: null, &quot;disclosed_quantity&quot;: null, &quot;transaction_type&quot;: &quot;B&quot;, &quot;average_price&quot;: null, &quot;traded_quantity&quot;: 1, &quot;exchange_order_id&quot;: &quot;1100000000020350&quot;, &quot;order_id&quot;: &quot;170328000000052&quot;, &quot;exchange_time&quot;: &quot;28-Mar-2017 18:03:20&quot;, &quot;time_in_micro&quot;: &quot;1490704156310111&quot;, &quot;status&quot;: &quot;complete&quot;, &quot;total_traded_quantity&quot;: 0, &quot;traded_shares&quot;: 0, &quot;traded_price&quot;: 0, &quot;trade_id&quot;: &quot;50030874&quot;, &quot;stop_loss&quot;: 0, &quot;square_off&quot;: 0, &quot;trailing_ticks&quot;: 0 }, { &quot;exchange&quot;: &quot;NSE_EQ&quot;, &quot;token&quot;: 2885, &quot;symbol&quot;: &quot;RELIANCE&quot;, &quot;product&quot;: &quot;I&quot;, &quot;order_type&quot;: &quot;L&quot;, &quot;price&quot;: null, &quot;trigger_price&quot;: null, &quot;quantity&quot;: null, &quot;disclosed_quantity&quot;: null, &quot;transaction_type&quot;: &quot;B&quot;, &quot;average_price&quot;: null, &quot;traded_quantity&quot;: 1, &quot;exchange_order_id&quot;: &quot;1100000000006972&quot;, &quot;order_id&quot;: &quot;170328000000030&quot;, &quot;exchange_time&quot;: &quot;28-Mar-2017 12:42:42&quot;, &quot;time_in_micro&quot;: &quot;1490697859120172&quot;, &quot;status&quot;: &quot;complete&quot;, &quot;total_traded_quantity&quot;: 0, &quot;traded_shares&quot;: 0, &quot;traded_price&quot;: 0, &quot;trade_id&quot;: &quot;50027602&quot;, &quot;stop_loss&quot;: 0, &quot;square_off&quot;: 0, &quot;trailing_ticks&quot;: 0 }, { &quot;exchange&quot;: &quot;NSE_EQ&quot;, &quot;token&quot;: 2885, &quot;symbol&quot;: &quot;RELIANCE&quot;, &quot;product&quot;: &quot;I&quot;, &quot;order_type&quot;: &quot;M&quot;, &quot;price&quot;: null, &quot;trigger_price&quot;: null, &quot;quantity&quot;: null, &quot;disclosed_quantity&quot;: null, &quot;transaction_type&quot;: &quot;B&quot;, &quot;average_price&quot;: null, &quot;traded_quantity&quot;: 1, &quot;exchange_order_id&quot;: &quot;1100000000020474&quot;, &quot;order_id&quot;: &quot;170328000000053&quot;, &quot;exchange_time&quot;: &quot;28-Mar-2017 18:04:20&quot;, &quot;time_in_micro&quot;: &quot;1490704215355625&quot;, &quot;status&quot;: &quot;complete&quot;, &quot;total_traded_quantity&quot;: 0, &quot;traded_shares&quot;: 0, &quot;traded_price&quot;: 0, &quot;trade_id&quot;: &quot;50031207&quot;, &quot;stop_loss&quot;: 0, &quot;square_off&quot;: 0, &quot;trailing_ticks&quot;: 0 }, { &quot;exchange&quot;: &quot;NSE_FO&quot;, &quot;token&quot;: 44866, &quot;symbol&quot;: &quot;NIFTY17MARFUT&quot;, &quot;product&quot;: &quot;I&quot;, &quot;order_type&quot;: &quot;L&quot;, &quot;price&quot;: null, &quot;trigger_price&quot;: null, &quot;quantity&quot;: null, &quot;disclosed_quantity&quot;: null, &quot;transaction_type&quot;: &quot;B&quot;, &quot;average_price&quot;: null, &quot;traded_quantity&quot;: 75, &quot;exchange_order_id&quot;: &quot;1100000000004623&quot;, &quot;order_id&quot;: &quot;170328000000031&quot;, &quot;exchange_time&quot;: &quot;28-Mar-2017 12:43:00&quot;, &quot;time_in_micro&quot;: &quot;1490684935796062&quot;, &quot;status&quot;: &quot;complete&quot;, &quot;total_traded_quantity&quot;: 0, &quot;traded_shares&quot;: 0, &quot;traded_price&quot;: 0, &quot;trade_id&quot;: &quot;50000457&quot;, &quot;stop_loss&quot;: 0, &quot;square_off&quot;: 0, &quot;trailing_ticks&quot;: 0 }, { &quot;exchange&quot;: &quot;NSE_EQ&quot;, &quot;token&quot;: 2885, &quot;symbol&quot;: &quot;RELIANCE&quot;, &quot;product&quot;: &quot;I&quot;, &quot;order_type&quot;: &quot;M&quot;, &quot;price&quot;: null, &quot;trigger_price&quot;: null, &quot;quantity&quot;: null, &quot;disclosed_quantity&quot;: null, &quot;transaction_type&quot;: &quot;B&quot;, &quot;average_price&quot;: null, &quot;traded_quantity&quot;: 1, &quot;exchange_order_id&quot;: &quot;1100000000019840&quot;, &quot;order_id&quot;: &quot;170328000000050&quot;, &quot;exchange_time&quot;: &quot;28-Mar-2017 17:59:33&quot;, &quot;time_in_micro&quot;: &quot;1490703928614186&quot;, &quot;status&quot;: &quot;complete&quot;, &quot;total_traded_quantity&quot;: 0, &quot;traded_shares&quot;: 0, &quot;traded_price&quot;: 0, &quot;trade_id&quot;: &quot;50029505&quot;, &quot;stop_loss&quot;: 0, &quot;square_off&quot;: 0, &quot;trailing_ticks&quot;: 0 }, { &quot;exchange&quot;: &quot;NSE_EQ&quot;, &quot;token&quot;: 2885, &quot;symbol&quot;: &quot;RELIANCE&quot;, &quot;product&quot;: &quot;I&quot;, &quot;order_type&quot;: &quot;M&quot;, &quot;price&quot;: null, &quot;trigger_price&quot;: null, &quot;quantity&quot;: null, &quot;disclosed_quantity&quot;: null, &quot;transaction_type&quot;: &quot;B&quot;, &quot;average_price&quot;: null, &quot;traded_quantity&quot;: 1, &quot;exchange_order_id&quot;: &quot;1100000000020149&quot;, &quot;order_id&quot;: &quot;170328000000051&quot;, &quot;exchange_time&quot;: &quot;28-Mar-2017 18:01:49&quot;, &quot;time_in_micro&quot;: &quot;1490704064457870&quot;, &quot;status&quot;: &quot;complete&quot;, &quot;total_traded_quantity&quot;: 0, &quot;traded_shares&quot;: 0, &quot;traded_price&quot;: 0, &quot;trade_id&quot;: &quot;50030314&quot;, &quot;stop_loss&quot;: 0, &quot;square_off&quot;: 0, &quot;trailing_ticks&quot;: 0 } ] } */ Upstox.prototype.getTradesInfo = function(params){ var __this = this; var HTTP_METHOD = &quot;GET&quot;; return utils.restify(&quot;tradesInfo&quot;, HTTP_METHOD, params, __this.auth.accessToken) }; /** * @method modifyOrder * @description Modify the order by updating the order quantity * @memberOf Upstox * @instance * @param {Object} params * @param {number} params.order_id The order which is to be modified * @param {number} [params.parent_order_id] The parent order id in case of CO and OCO orders * @param {number} [params.price] The limit price for the order, defaults to 0 * @param {number} [params.trigger_price] The trigger price for the order, defaults to 0 * @param {number} [params.quantity] The quantity of order * @param {number} [params.disclosed_quantity] The quantity to disclose * @param {string} [params.valid_date] The valid date of the order in case of MCX_FO * @return {res} * @example { &quot;code&quot;: 200, &quot;status&quot;: &quot;OK&quot;, &quot;timestamp&quot;: &quot;2017-03-27T11:57:02+05:30&quot;, &quot;message&quot;: &quot;success&quot;, &quot;data&quot;: { &quot;exchange&quot;: &quot;NSE_EQ&quot;, &quot;token&quot;: 2885, &quot;symbol&quot;: &quot;RELIANCE&quot;, &quot;product&quot;: &quot;I&quot;, &quot;order_type&quot;: &quot;M&quot;, &quot;duration&quot;: &quot;DAY&quot;, &quot;price&quot;: 0, &quot;trigger_price&quot;: 0, &quot;quantity&quot;: 10, &quot;disclosed_quantity&quot;: 0, &quot;transaction_type&quot;: &quot;B&quot;, &quot;average_price&quot;: 0, &quot;traded_quantity&quot;: 0, &quot;message&quot;: &quot;&quot;, &quot;exchange_order_id&quot;: &quot;&quot;, &quot;parent_order_id&quot;: &quot;NA&quot;, &quot;order_id&quot;: &quot;170327000000003&quot;, &quot;exchange_time&quot;: &quot;&quot;, &quot;time_in_micro&quot;: &quot;1490595778207641&quot;, &quot;status&quot;: &quot;not modified&quot;, &quot;is_amo&quot;: false, &quot;valid_date&quot;: &quot;&quot;, &quot;order_request_id&quot;: &quot;2&quot;, &quot;total_traded_quantity&quot;: 0, &quot;traded_shares&quot;: 0, &quot;traded_price&quot;: 0, &quot;stop_loss&quot;: 0, &quot;square_off&quot;: 0, &quot;trailing_ticks&quot;: 0 } } */ Upstox.prototype.modifyOrder = function(params){ var __this = this; var HTTP_METHOD = &quot;PUT&quot;; params = params || {}; if(!params.parent_order_id){ params[&quot;parent_order_id&quot;] = &quot;&quot;; } return utils.restify(&quot;modifyOrder&quot;, HTTP_METHOD, params, __this.auth.accessToken) }; /** * @method cancelOrder * @description Cancel the order * @memberOf Upstox * @instance * @param {object} params * @param {number} params.order_id order_id generated after you place an order. * @return {res} * @example { &quot;code&quot;: 200, &quot;status&quot;: &quot;OK&quot;, &quot;timestamp&quot;: &quot;2017-03-27T11:38:40+05:30&quot;, &quot;message&quot;: &quot;success&quot;, &quot;data&quot;: { &quot;exchange&quot;: &quot;NSE_EQ&quot;, &quot;token&quot;: 2885, &quot;symbol&quot;: &quot;RELIANCE&quot;, &quot;product&quot;: &quot;I&quot;, &quot;order_type&quot;: &quot;M&quot;, &quot;duration&quot;: &quot;DAY&quot;, &quot;price&quot;: 0, &quot;trigger_price&quot;: 0, &quot;quantity&quot;: 1, &quot;disclosed_quantity&quot;: 1, &quot;transaction_type&quot;: &quot;B&quot;, &quot;average_price&quot;: 0, &quot;traded_quantity&quot;: 0, &quot;message&quot;: &quot;&quot;, &quot;exchange_order_id&quot;: &quot;&quot;, &quot;parent_order_id&quot;: &quot;NA&quot;, &quot;order_id&quot;: &quot;170327000000002&quot;, &quot;exchange_time&quot;: &quot;&quot;, &quot;time_in_micro&quot;: &quot;1490594676511489&quot;, &quot;status&quot;: &quot;not cancelled&quot;, &quot;is_amo&quot;: false, &quot;valid_date&quot;: &quot;&quot;, &quot;order_request_id&quot;: &quot;2&quot;, &quot;total_traded_quantity&quot;: 0, &quot;traded_shares&quot;: 0, &quot;traded_price&quot;: 0, &quot;stop_loss&quot;: 0, &quot;square_off&quot;: 0, &quot;trailing_ticks&quot;: 0 } } */ Upstox.prototype.cancelOrder = function(params){ var __this = this; var HTTP_METHOD = &quot;DELETE&quot;; params = params || {}; if(!params.parent_order_id){ params[&quot;parent_order_id&quot;] = &quot;&quot;; } return utils.restify(&quot;cancelOrder&quot;, HTTP_METHOD, params, __this.auth.accessToken) }; /** * @method getMasterContract * @description Download the master contract as csv. * The master contract contains all necessary information about all available contracts. * Gets all contracts or filter contracts by exchange segment. * @memberOf Upstox * @instance * @param {object} params * @param {string} [params.exchange] name of the exchange to get specific BOD details * ~~~~ eg : The exchange segment params.exchange can be - bse_eq (BSE Equity) bcd_fo (BSE Futures &amp; Options) nse_eq (NSE Equity) nse_fo (NSE Futures &amp; Options) ncd_fo (NSE Currency Futures &amp; Options) ~~~~ * @return {res} * @example * { &quot;code&quot;: 200, &quot;status&quot;: &quot;OK&quot;, &quot;timestamp&quot;: &quot;2017-03-07T15:33:08+05:30&quot;, &quot;message&quot;: &quot;success&quot;, &quot;data&quot;:[ &quot;exchange,token,parent_token,symbol,name,closing_price,expiry,strike_price,tick_size,lot_size,instrument_type&quot;, &quot;NSE_EQ,19262,,1,LTAMC - 1,,,,1,1,&quot;, &quot;NSE_EQ,10104,,1IADD,DHFL PRAMERICA MF - HYBRI,,,,1,1,&quot;, &quot;NSE_EQ,10105,,1ID1G,DHFL PRAMERICA MF - HYBRI,,,,1,1,&quot;, &quot;NSE_EQ,10106,,1ID2D,DHFL PRAMERICA MF - HYBRI,,,,1,1,&quot;, ..... ] } */ Upstox.prototype.getMasterContract = function(params){ var __this = this; var HTTP_METHOD = &quot;GET&quot;; params = params || {}; if(!params.exchange){ params[&quot;exchange&quot;] = &quot;&quot;; } return utils.restify(&quot;masterContract&quot;, HTTP_METHOD, params, __this.auth.accessToken) }; /** * @method getLiveFeed * @description Get Instruments list * @memberOf Upstox * @instance * @param {object} params * @param {string} params.exchange name of the exchange to get live feeds of. * ~~~~ eg: The exchange segment params.exchange can be - bse_eq (BSE Equity) bcd_fo (BSE Futures &amp; Options) nse_eq (NSE Equity) nse_fo (NSE Futures &amp; Options) ncd_fo (NSE Currency Futures &amp; Options) ~~~~ * @param {string} params.symbol The symbol of the instrument. This must match exactly as given in the master contract csv. * ~~~ eg: reliance ~~~ * @param {string} params.type type of feed. * ~~~ eg: &quot;ltp&quot;, &quot;full&quot; ~~~ * @param {string} [params.format] Response format json/csv * @return {res} * @example * { &quot;code&quot;: 200, &quot;status&quot;: &quot;OK&quot;, &quot;timestamp&quot;: &quot;2017-03-07T15:50:40+05:30&quot;, &quot;message&quot;: &quot;feed&quot;, &quot;data&quot;:{ &quot;timestamp&quot;: 1488882035000, &quot;ltp&quot;: 1304.95, &quot;open&quot;: 1318.85, &quot;high&quot;: 1327, &quot;low&quot;: 1296.15, &quot;close&quot;: 1304.95, &quot;vtt&quot;: 9616358, &quot;atp&quot;: 1309.21, &quot;oi&quot;: null, &quot;spot_price&quot;: 0, &quot;total_buy_qty&quot;: 7454, &quot;total_sell_qty&quot;: 0, &quot;bids&quot;:[{ &quot;quantity&quot;: 7454, &quot;price&quot;: 1304.95, &quot;orders&quot;: 36 }], &quot;asks&quot;:[{ &quot;quantity&quot;: 0, &quot;price&quot;: 0, &quot;orders&quot;: 0 }] } } */ Upstox.prototype.getLiveFeed = function(params){ var __this = this; var HTTP_METHOD = &quot;GET&quot;; return utils.restify(&quot;liveFeed&quot;, HTTP_METHOD, params, __this.auth.accessToken); }; /** * @method getOHLC * @description Get the OHLC candle values for a given instrument * @memberOf Upstox * @instance * @param params * @param {string} params.exchange name of the exchange to get live feeds of. * ~~~~ eg: The exchange segment params.exchange can be - bse_eq (BSE Equity) bcd_fo (BSE Futures &amp; Options) nse_eq (NSE Equity) nse_fo (NSE Futures &amp; Options) ncd_fo (NSE Currency Futures &amp; Options) ~~~~ * @param {string} params.symbol The symbol of the instrument. This must match exactly as given in the master contract csv * ~~~ eg: reliance ~~~ * @param {string} [params.interval] Default: 1day * ~~~~~ 1MINUTE 5MINUTE 10MINUTE 30MINUTE 60MINUTE 1DAY 1WEEK 1MONTH * ~~~~~ * @param {string} [params.start_date] Default: 15 days before today * ~~~~~ Date format: DD-MM-YYYY ~~~~~ * @param {string} [params.end_date] Default: today * ~~~~~ Date format: DD-MM-YYYY ~~~~~ * @param {string} [params.format] Default: json * ~~~~~ csv json ~~~~ * @return {res} * @example { &quot;code&quot;: 200, &quot;status&quot;: &quot;OK&quot;, &quot;timestamp&quot;: &quot;&quot;, &quot;message&quot;: &quot;ohlc&quot;, &quot;data&quot;: [ { &quot;timestamp&quot;: 1485973800000, &quot;open&quot;: 1050, &quot;high&quot;: 1050.8, &quot;low&quot;: 1038.25, &quot;close&quot;: 1043.5, &quot;volume&quot;: 2079908, &quot;cp&quot;: 1045.55 } ] } */ Upstox.prototype.getOHLC = function(params){ var __this = this; var HTTP_METHOD = &quot;GET&quot;; return utils.restify(&quot;OHLC&quot;, HTTP_METHOD, params, __this.auth.accessToken); }; /** * @method subscribeFeed * @description Subscribe to a live feed for a given exchange and set of symbols * @memberOf Upstox * @instance * @param params * @param {string} params.exchange name of the exchange to get live feeds of. * ~~~~ eg: The exchange segment params.exchange can be - bse_eq (BSE Equity) bcd_fo (BSE Futures &amp; Options) nse_eq (NSE Equity) nse_fo (NSE Futures &amp; Options) ncd_fo (NSE Currency Futures &amp; Options) ~~~~ * @param {string} params.symbol The symbol of the instrument. This must match exactly as given in the master contract csv. The symbol can have multiple symbols, separated by comma * ~~~ eg: reliance ~~~ * @param {string} params.type The type of feed &quot;ltp&quot; or &quot;full&quot; * @return {res} */ Upstox.prototype.subscribeFeed = function(params){ var __this = this; var HTTP_METHOD = &quot;GET&quot;; return utils.restify(&quot;liveFeedSubscribe&quot;, HTTP_METHOD, params, __this.auth.accessToken) } /** * @method unsubscribeFeed * @description Unsubscribe from a live feed for a given exchange and set of symbols * @memberOf Upstox * @instance * @param params * @param {string} params.exchange name of the exchange to get live feeds of. * ~~~~ eg: The exchange segment params.exchange can be - bse_eq (BSE Equity) bcd_fo (BSE Futures &amp; Options) nse_eq (NSE Equity) nse_fo (NSE Futures &amp; Options) ncd_fo (NSE Currency Futures &amp; Options) ~~~~ * @param {string} params.symbol The symbol of the instrument. This must match exactly as given in the master contract csv. The symbol can have multiple symbols, separated by comma * ~~~ eg: reliance ~~~ * @param {string} params.type The type of feed &quot;ltp&quot; or &quot;full&quot; * @return {res} */ Upstox.prototype.unsubscribeFeed = function(params){ var __this = this; var HTTP_METHOD = &quot;GET&quot;; return utils.restify(&quot;liveFeedUnsubscribe&quot;, HTTP_METHOD, params, __this.auth.accessToken) } /** * @method connectSocket * @description Connect to web socket server. * @memberOf Upstox * @instance * @return promise * @throws {Error} User not autheticated * @throws {Error} Connection Error * @example var upstox = new Upstox(&quot;your_apikey&quot;, &quot;your_apiSecretKey&quot;); upstox.getSessionToken(login_credentials) .then((response)=&gt;{ upstox.connectSocket() .then(() =&gt; { //code to set socket listeners }, (err) =&gt; { //handle connection errors }); }); */ Upstox.prototype.connectSocket = function() { var __this = this, socket = new WebSocketClient(); __this.socket = socket; return new promise(function (resolve, reject) { if(__this.isAuthenticated) { socket.on('connectFailed', function(error) { reject(error); }); socket.on('connect', function(connection) { __this.socketConnection = connection; connection.on('error', function(error) { if(__this.socketErrorListener) { __this.socketErrorListener.call(null, error); } else { logger.debug(&quot;Connection Error: &quot; + error.toString()); } }); connection.on('close', function() { if(__this.socketCloseListener) { __this.socketCloseListener.call(null, &quot;Connection Closed&quot;); } else { logger.debug(&quot;Connection Closed&quot;); } }); connection.on('message', function(message) { var parsedMessage, socketListener; if(message.type === &quot;utf8&quot;) { parsedMessage = JSON.parse(message.utf8Data); if(utils.isStatus2XX(parsedMessage.code)) { switch (parsedMessage.message) { case constants.MESSAGE_TYPES.FILL_REPORT: socketListener = __this.socketTradeUpdateListener; break; case constants.MESSAGE_TYPES.ORDER_UPDATE: socketListener = __this.socketOrderUpdateListener; break; case constants.MESSAGE_TYPES.POSITION_UPDATE: case constants.MESSAGE_TYPES.GET_POSITION: socketListener = __this.socketPositionUpdateListener; break; default: logger.debug(&quot;add listeners for event type &quot; + parsedMessage.message); } } else { socketListener = __this.socketErrorListener; } if(socketListener) { socketListener.call(null, parsedMessage.data); } } else if(message.type === &quot;binary&quot;) { parsedMessage = atob(message.binaryData); if(__this.socketLiveFeedListener) { __this.socketLiveFeedListener.call(null, utils.convertFeedCsvToJson(parsedMessage)); } } else { logger.debug(&quot;add listeners for message type&quot;+ message.type); } }); resolve(); }); logger.debug(&quot;In socket ---&quot; + JSON.stringify(__this.auth.accessToken)); socket.connect(utils.getSocketEndpoint(__this.auth)); } else { reject(new Error(&quot;User not authenticated&quot;)) } }); } /** * @method closeSocket * @description Close the socket connection. * @memberOf Upstox * @instance */ Upstox.prototype.closeSocket = function() { if(this.socketConnection) { this.socketConnection.close(); } } /** * @method on * @description set socket event listeners * @memberOf Upstox * @instance * @param {string} eventName name of the event. * ~~~~ The eventName can be - orderUpdate positionUpdate tradeUpdate liveFeed disconnected error ~~~~ * @param {function} listener function to listen to events * @throws {Error} Unsupported event * @throws {Error} Incorrect Parameter * @example var upstox = new Upstox(&quot;your_apikey&quot;, &quot;your_apiSecretKey&quot;); upstox.getSessionToken(login_credentials) .then((response)=&gt;{ upstox.connectSocket() .then(() =&gt; { //code to set socket listeners upstox.on(&quot;orderUpdate&quot;, function(message) { //message for order updates }); upstox.on(&quot;positionUpdate&quot;, function(message) { //message for position conversion }); upstox.on(&quot;tradeUpdate&quot;, function(message) { //message for trade updates }); upstox.on(&quot;liveFeed&quot;, function(message) { //message for live feed }); upstox.on(&quot;disconnected&quot;, function(message) { //listener after socket connection is disconnected }); upstox.on(&quot;error&quot;, function(error) { //error listener }); }, (err) =&gt; { //handle connection errors }); }); */ Upstox.prototype.on = function(eventName, listener) { var __this = this; if(utils.validateSocketEventParams(eventName, listener)) { switch(eventName) { case constants.EVENTS.ORDER_UPDATE: __this.socketOrderUpdateListener = listener; break; case constants.EVENTS.POSITION_UPDATE: __this.socketPositionUpdateListener = listener; break; case constants.EVENTS.TRADE_UPDATE: __this.socketTradeUpdateListener = listener; break; case constants.EVENTS.LIVE_FEED: __this.socketLiveFeedListener = listener; break; case constants.EVENTS.DISCONNECTED: __this.socketCloseListener = listener; break; case constants.EVENTS.ERROR: __this.socketErrorListener = listener; break; } } } module.exports.Upstox = Upstox; × Search results Close Documentation generated by JSDoc 3.4.3 on Tue Apr 25th 2017 using the DocStrap template. "},"example_example.js.html":{"id":"example_example.js.html","title":"Source: example/example.js","body":" Upstox API Modules Example Classes Upstox Source: example/example.js /** * Created by renuka on 11/4/17. */ /** * Currently the node module is not yet published. * * To start using upstox services - * 1. Require the index.js. * 2. Authenticate with your uccid and password with Upstox using getSessionToken method. * 3. On completion of authentication, subsequent services can be called as shown in below example. * * * Every service returns a promise which will either be resolved or rejected. * * Websocket services are available for following events -[live data, position updates, tradeUpdates, liveFeeds] * * To get an active socket connection use connectSocket Method. * @module Example */ var Upstox = require(&quot;../index&quot;); var logger = new utils.Logger(); var upstox = new Upstox(&quot;your client_id&quot;); var params ={ &quot;client_id&quot; : &quot;your_client_id&quot;, &quot;client_secret&quot; : &quot;your_client_secret&quot;, &quot;code&quot; : &quot;your_code_generated_in login&quot;, &quot;grant_type&quot; : &quot;authorization_code&quot;, &quot;redirect_uri&quot; : &quot;your_redirect_uri&quot; }; var orderObject = { transaction_type:&quot;b&quot;, exchange:&quot;NSE_EQ&quot;, symbol: &quot;RELIANCE&quot;, quantity: 1, order_type:&quot;m&quot; }; upstox.getAccessToken(params) .then(function(response) { start(); }) .catch(function(err) { logger.error(err); }); function start() { // Fetch holdings. // You can have other api calls here. // Get Holdings upstox.getHoldings() .then(function(response) { // You got user's holding details. logger.debug(response); }).catch(function(err) { // Something went wrong. logger.error(err); }); // GetProfile upstox.getProfile() .then(function (response) { // expect(response.code === 200); // should.exist(response.data); // var data = response.data; // should.exist(data.client_id); // should.exist(data.name); // should.exist(data.account_type); // should.exist(data.pan); // should.exist(data.email); // should.exist(data.phone); // should.exist(data.nse_pcode); // should.exist(data.bse_pcode); // should.exist(data.bse_custodian_code); // should.exist(data.dp_account_number); // should.exist(data.products_enabled); // should.exist(data); logger.debug(response); //done(); }) .catch(function(error){ logger.error(&quot;%%%%%%%%%%%%% &quot;, error); //done(error); }); // PlaceOrder upstox.placeOrder(orderObject) .then(function(response) { // Order details received logger.debug(response); }) .catch(function(err) { // Something went wrong. logger.error(err); }); // Socket upstox.connectSocket() .then(function(){ // Socket Connection successfull // Now you can setup listeners upstox.on(&quot;orderUpdate&quot;, function(message) { //message for order updates logger.debug(message); }); upstox.on(&quot;positionUpdate&quot;, function(message) { //message for position conversion logger.debug(message); }); upstox.on(&quot;tradeUpdate&quot;, function(message) { //message for trade updates logger.debug(message); }); upstox.on(&quot;liveFeed&quot;, function(message) { //message for live feed logger.debug(message); }); upstox.on(&quot;disconnected&quot;, function(message) { //listener after socket connection is disconnected logger.debug(message); }); upstox.on(&quot;error&quot;, function(error) { //error listener logger.debug(error); }); //You can call upstox.closeSocket() to disconnect }).catch(function(err) { // Something went wrong. logger.error(err); }) } × Search results Close Documentation generated by JSDoc 3.4.3 on Tue Apr 25th 2017 using the DocStrap template. "},"modules.list.html":{"id":"modules.list.html","title":"Modules","body":" Upstox API Modules Example Classes Upstox Modules Classes Upstox × Search results Close Documentation generated by JSDoc 3.4.3 on Tue Apr 25th 2017 using the DocStrap template. "},"classes.list.html":{"id":"classes.list.html","title":"Classes","body":" Upstox API Modules Example Classes Upstox Classes Classes Upstox × Search results Close Documentation generated by JSDoc 3.4.3 on Tue Apr 25th 2017 using the DocStrap template. "},"index.html":{"id":"index.html","title":"Index","body":" Upstox API Modules Example Classes Upstox Upstox API Nodejs clientThe official Javascript node client for communicating with the Upstox APIs Upstox Node Js Library provides an easy to use wrapper over the HTTP APIs. The HTTP calls have been converted to methods and their JSON responses. Moreover we provide websocket connection APIS to get live updates from Upstox APIs. InstallationThis module is installed via npm: npm install --save UpstoxGetting started with API var Upstox = require(&quot;Upstox&quot;); var up = new Upstox(&quot;your_apikey&quot;, &quot;your_apiSecretKey&quot;); var params = { &quot;username&quot; : &quot;123345&quot;, &quot;password&quot; : &quot;5xcvbns&quot; } up.getSessionToken(params) .then(function(response) { start(); }) .catch(function(err) { console.log(err.response); }) function start() { // Fetch holdings. // You can have other api calls here. up.getHoldings() .then(function(response) { // You got user's holding details. }).catch(function(err) { // Something went wrong. }); up.connectSocket() .then(function(){ // Socket Connection successfull // Now you can setup listeners up.on(&quot;orderUpdate&quot;, function(message) { //message for order updates }); up.on(&quot;positionUpdate&quot;, function(message) { //message for position conversion }); up.on(&quot;tradeUpdate&quot;, function(message) { //message for trade updates }); up.on(&quot;liveFeed&quot;, function(message) { //message for live feed }); up.on(&quot;disconnected&quot;, function(message) { //listener after socket connection is disconnected }); up.on(&quot;error&quot;, function(error) { //error listener }); //You can call up.closeSocket() to disconnect }).catch(function(err){ // Something went wrong. }); } Index lib/src/UpstoxAPI.js Author: renuka.misal@rksv.in (RenukaMisal92) Source: src/UpstoxAPI.js, line 1 × Search results Close Documentation generated by JSDoc 3.4.3 on Tue Apr 25th 2017 using the DocStrap template. "},"Upstox.html":{"id":"Upstox.html","title":"Class: Upstox","body":" Upstox API Modules Example Classes Upstox Class: Upstox Upstox API client class. You need to initialise a single instance of this class per api_key. This module provides an easy to use wrapper over the HTTP APIs. The HTTP calls have been converted to methods and their JSON responses. Moreover we provide websocket connection APIS to get live updates from Upstox APIs. var Upstox = require(&quot;upstox&quot;); var up = new Upstox(&quot;your_apikey&quot;, &quot;your_apiSecretKey&quot;); up.getSessionToken({ &quot;username&quot;: &quot;your_clientId&quot;, &quot;password&quot;: &quot;password&quot; }) .then(function(response) { start(); }) .catch(function(err) { logger.debug(err.response); }) start(){ up.getProfile() .then(function(response){ //get the result here }) .catch(function(error){ //catch the error here }); up.connectSocket() .then(function(){ // Socket Connection successfull // Now you can setup listeners up.on(&quot;orderUpdate&quot;, function(message) { //message for order updates }); up.on(&quot;positionUpdate&quot;, function(message) { //message for position conversion }); up.on(&quot;tradeUpdate&quot;, function(message) { //message for trade updates }); up.on(&quot;liveFeed&quot;, function(message) { //message for live feed }); up.on(&quot;disconnected&quot;, function(message) { //listener after socket connection is disconnected }); up.on(&quot;error&quot;, function(error) { //error listener }); //You can call up.closeSocket() to disconnect }).catch(function(err){ // Something went wrong. }); } new Upstox(client_id [, accessToken]) Parameters: Name Type Argument Description client_id string Assigned to you used to authenticate the developers app accessToken string &lt;optional&gt; SessionId generated after successfully logging to upstox API. Source: src/UpstoxAPI.js, line 16 Example Initialize Upstox object var Upstox = require(&quot;Upstox&quot;); var up = new Upstox(&quot;your_apikey&quot;, &quot;your_apiSecretKey&quot;); Members &lt;static&gt; this.auth :Object Type: Object Source: src/UpstoxAPI.js, line 89 Methods setToken(accessToken) method to associate the accessToken with the class object. Parameters: Name Type Description accessToken string Token generated after the users logged in successfully with its Upstox client_id(username) and password. Source: src/UpstoxAPI.js, line 104 getLoginUri(client_id, redirect_uri, response_type) Parameters: Name Type Description client_id Assigned to you used to authenticate the developers app redirect_uri Redirect_uri specified by you while creating an app response_type Th response_type should be &quot;code&quot; Source: src/UpstoxAPI.js, line 129 Returns: Login Url to get authorized. Type string getSessionToken(params) Method to get the session token required to authenticate user Parameters: Name Type Description params object Properties Name Type Description client_id string valid client id for UPSTOX client_secret string code string grantType string redirect_uri string Source: src/UpstoxAPI.js, line 144 Returns: promise getProfile() Method to get the profile details Source: src/UpstoxAPI.js, line 184 Returns: Type res Example { &quot;code&quot;: 200, &quot;status&quot;: &quot;OK&quot;, &quot;timestamp&quot;: &quot;2017-03-07T12:39:00+05:30&quot;, &quot;message&quot;: &quot;success&quot;, &quot;data&quot;:{ &quot;client_id&quot;: &quot;1203&quot;, &quot;name&quot;: &quot;xyz&quot;, &quot;account_type&quot;: &quot;--&quot;, &quot;pan&quot;: &quot;ABCDERYTUIU&quot;, &quot;email&quot;: &quot;xyz@gmail.com&quot;, &quot;phone&quot;: &quot;&quot;, &quot;nse_pcode&quot;: &quot;&quot;, &quot;bse_pcode&quot;: &quot;&quot;, &quot;bse_custodian_code&quot;: &quot;&quot;, &quot;dp_account_number&quot;: &quot;--&quot;, &quot;dob&quot;: &quot;14/10/2001&quot;, &quot;is_active&quot;: true, &quot;exchanges_enabled&quot;:[&quot;BSE_EQ&quot;, &quot;NSE_EQ&quot;, &quot;NSE_FO&quot;, &quot;NCD_FO&quot;, &quot;BCD_FO&quot;], &quot;products_enabled&quot;:[&quot;OCO&quot;, &quot;D&quot;, &quot;CO&quot;, &quot;I&quot;] } } getHoldings() Get the user's holdings. Source: src/UpstoxAPI.js, line 222 Returns: Type res Example { &quot;code&quot;: 200, &quot;status&quot;: &quot;OK&quot;, &quot;timestamp&quot;: &quot;2017-03-07T15:47:22+05:30&quot;, &quot;message&quot;: &quot;get_holdings&quot;, &quot;data&quot;:[] } getBalance(params) Get the user's account balances for equity and commodity. Parameters: Name Type Description params object Properties Name Type Description type string eq - Equity , com - Commodity Source: src/UpstoxAPI.js, line 244 Returns: Type res Example { &quot;code&quot;: 200, &quot;status&quot;: &quot;OK&quot;, &quot;timestamp&quot;: &quot;2017-03-07T15:43:40+05:30&quot;, &quot;message&quot;: &quot;success&quot;, &quot;data&quot;:{ &quot;equity&quot;:{&quot;used_margin&quot;: 149.62875, &quot;unrealized_mtm&quot;: 0, &quot;realized_mtm&quot;: 0, &quot;payin_amount&quot;: 878000, &quot;span_margin&quot;: 0,…}, &quot;commodity&quot;:{&quot;used_margin&quot;: 0, &quot;unrealized_mtm&quot;: 0, &quot;realized_mtm&quot;: 0, &quot;payin_amount&quot;: 10000, &quot;span_margin&quot;: 0,…} } } getPositions() Get the user's day positions. Source: src/UpstoxAPI.js, line 271 Returns: Type res Example { &quot;code&quot;: 200, &quot;status&quot;: &quot;OK&quot;, &quot;timestamp&quot;: &quot;2017-03-07T15:39:07+05:30&quot;, &quot;message&quot;: &quot;get_positions&quot;, &quot;data&quot;: [ { &quot;exchange&quot;: &quot;NSE_EQ&quot;, &quot;token&quot;: &quot;2885&quot;, &quot;product&quot;: &quot;I&quot;, &quot;fill_buy_amount&quot;: &quot;1015.00&quot;, &quot;fill_sell_amount&quot;: &quot;0&quot;, &quot;fill_buy_cf_amount&quot;: &quot;0&quot;, &quot;fill_sell_cf_amount&quot;: &quot;0&quot;, &quot;fill_buy_cf_qty&quot;: 0, &quot;fill_sell_quantity&quot;: 0, &quot;fill_buy_quantity&quot;: 1, &quot;fill_sell_cf_qty&quot;: 0 } ] } placeOrder(params) Placing an order Parameters: Name Type Description params object Properties Name Type Argument Description transaction_type string Buy or Sell. b : BUY, s : SELL exchange string The exchange segment symbol string The symbol of the instrument quantity number The quantity of order to buy/sell order_type string The type of order to place. l : Limit Order, m : Market Order price number &lt;optional&gt; The limit price for the order, defaults to 0 trigger_price number &lt;optional&gt; The trigger price for the order, defaults to 0 duration string &lt;optional&gt; The duration of the order (day / ioc) product string &lt;optional&gt; The product (I: Intraday Order, D: Delivery Order, CO: Cover Order,OCO: Bracket Order) disclosed_quantity number &lt;optional&gt; The quantity to disclose is_amo boolean &lt;optional&gt; true: Indicates order is After Market Order, false: Indicates order is normal order stoploss number &lt;optional&gt; The stoploss for OCO order. It is mandatory for OCO. squareoff number &lt;optional&gt; The squareoff or profit taking for OCO order. It is mandatory for OCO. Source: src/UpstoxAPI.js, line 307 Returns: Type res Example { &quot;code&quot;: 200, &quot;status&quot;: &quot;OK&quot;, &quot;timestamp&quot;: &quot;2017-03-07T15:49:27+05:30&quot;, &quot;message&quot;: &quot;success&quot;, &quot;data&quot;:{ &quot;exchange&quot;: &quot;NSE_EQ&quot;, &quot;token&quot;: 2885, &quot;symbol&quot;: &quot;RELIANCE&quot;, &quot;product&quot;: &quot;I&quot;, &quot;order_type&quot;: &quot;M&quot;, &quot;duration&quot;: &quot;DAY&quot;, &quot;price&quot;: 0, &quot;trigger_price&quot;: 0, &quot;quantity&quot;: 1, &quot;disclosed_quantity&quot;: 1, &quot;transaction_type&quot;: &quot;B&quot;, &quot;average_price&quot;: 0, &quot;traded_quantity&quot;: 0, &quot;message&quot;: &quot;&quot;, &quot;exchange_order_id&quot;: &quot;&quot;, &quot;parent_order_id&quot;: &quot;NA&quot;, &quot;order_id&quot;: &quot;170307000000021&quot;, &quot;exchange_time&quot;: &quot;&quot;, &quot;time_in_micro&quot;: &quot;0&quot;, &quot;status&quot;: &quot;put order req received&quot;, &quot;is_amo&quot;: false, &quot;valid_date&quot;: &quot;&quot;, &quot;order_request_id&quot;: &quot;1&quot;, &quot;total_traded_quantity&quot;: 0, &quot;traded_shares&quot;: 0, &quot;traded_price&quot;: 0, &quot;stop_loss&quot;: 0, &quot;square_off&quot;: 0, &quot;trailing_ticks&quot;: 0 } } getOrders() Get the orders placed Source: src/UpstoxAPI.js, line 373 Returns: Type res Example { &quot;code&quot;: 200, &quot;status&quot;: &quot;OK&quot;, &quot;timestamp&quot;: &quot;2017-03-28T17:01:02+05:30&quot;, &quot;message&quot;: &quot;success&quot;, &quot;data&quot;: [ { &quot;exchange&quot;: &quot;NSE_EQ&quot;, &quot;token&quot;: 4067, &quot;symbol&quot;: &quot;MARICO&quot;, &quot;product&quot;: &quot;I&quot;, &quot;order_type&quot;: &quot;L&quot;, &quot;duration&quot;: &quot;GTC&quot;, &quot;price&quot;: 250.5, &quot;trigger_price&quot;: 0, &quot;quantity&quot;: 10, &quot;disclosed_quantity&quot;: 0, &quot;transaction_type&quot;: &quot;B&quot;, &quot;average_price&quot;: 0, &quot;traded_quantity&quot;: 0, &quot;message&quot;: &quot;16273 : Does not exist&quot;, &quot;exchange_order_id&quot;: &quot;1100000000057116&quot;, &quot;parent_order_id&quot;: &quot;NA&quot;, &quot;order_id&quot;: &quot;161026000000007&quot;, &quot;exchange_time&quot;: &quot;08-Mar-2017 16:12:47&quot;, &quot;time_in_micro&quot;: &quot;1488969541034779&quot;, &quot;status&quot;: &quot;open&quot;, &quot;is_amo&quot;: false, &quot;valid_date&quot;: &quot;--&quot;, &quot;order_request_id&quot;: &quot;4&quot;, &quot;total_traded_quantity&quot;: 0, &quot;traded_shares&quot;: 0, &quot;traded_price&quot;: 0, &quot;stop_loss&quot;: 0, &quot;square_off&quot;: 0, &quot;trailing_ticks&quot;: 0 }, { &quot;exchange&quot;: &quot;NSE_EQ&quot;, &quot;token&quot;: 2885, &quot;symbol&quot;: &quot;RELIANCE&quot;, &quot;product&quot;: &quot;I&quot;, &quot;order_type&quot;: &quot;L&quot;, &quot;duration&quot;: &quot;DAY&quot;, &quot;price&quot;: 1080, &quot;trigger_price&quot;: 0, &quot;quantity&quot;: 1, &quot;disclosed_quantity&quot;: 0, &quot;transaction_type&quot;: &quot;B&quot;, &quot;average_price&quot;: 1080, &quot;traded_quantity&quot;: 1, &quot;message&quot;: &quot;&quot;, &quot;exchange_order_id&quot;: &quot;1100000000006972&quot;, &quot;parent_order_id&quot;: &quot;NA&quot;, &quot;order_id&quot;: &quot;170328000000030&quot;, &quot;exchange_time&quot;: &quot;28-Mar-2017 12:42:42&quot;, &quot;time_in_micro&quot;: &quot;1490697859120172&quot;, &quot;status&quot;: &quot;complete&quot;, &quot;is_amo&quot;: false, &quot;valid_date&quot;: &quot;--&quot;, &quot;order_request_id&quot;: &quot;1&quot;, &quot;total_traded_quantity&quot;: 0, &quot;traded_shares&quot;: 0, &quot;traded_price&quot;: 0, &quot;stop_loss&quot;: 0, &quot;square_off&quot;: 0, &quot;trailing_ticks&quot;: 0 } ] } getTradesInfo(params) Get the trades details for a particular order Parameters: Name Type Description params object Properties Name Type Description order_id string the order id for which trade details are to be fetched Source: src/UpstoxAPI.js, line 458 Returns: Type res Example { &quot;code&quot;: 200, &quot;status&quot;: &quot;OK&quot;, &quot;timestamp&quot;: &quot;2017-03-28T18:19:24+05:30&quot;, &quot;message&quot;: &quot;success&quot;, &quot;data&quot;: [ { &quot;exchange&quot;: &quot;NSE_EQ&quot;, &quot;token&quot;: 2885, &quot;symbol&quot;: &quot;RELIANCE&quot;, &quot;product&quot;: &quot;I&quot;, &quot;order_type&quot;: &quot;M&quot;, &quot;price&quot;: null, &quot;trigger_price&quot;: null, &quot;quantity&quot;: null, &quot;disclosed_quantity&quot;: null, &quot;transaction_type&quot;: &quot;B&quot;, &quot;average_price&quot;: null, &quot;traded_quantity&quot;: 1, &quot;exchange_order_id&quot;: &quot;1100000000020501&quot;, &quot;order_id&quot;: &quot;170328000000054&quot;, &quot;exchange_time&quot;: &quot;28-Mar-2017 18:04:22&quot;, &quot;time_in_micro&quot;: &quot;1490704218023191&quot;, &quot;status&quot;: &quot;complete&quot;, &quot;total_traded_quantity&quot;: 0, &quot;traded_shares&quot;: 0, &quot;traded_price&quot;: 0, &quot;trade_id&quot;: &quot;50031226&quot;, &quot;stop_loss&quot;: 0, &quot;square_off&quot;: 0, &quot;trailing_ticks&quot;: 0 }, { &quot;exchange&quot;: &quot;NSE_EQ&quot;, &quot;token&quot;: 2885, &quot;symbol&quot;: &quot;RELIANCE&quot;, &quot;product&quot;: &quot;I&quot;, &quot;order_type&quot;: &quot;M&quot;, &quot;price&quot;: null, &quot;trigger_price&quot;: null, &quot;quantity&quot;: null, &quot;disclosed_quantity&quot;: null, &quot;transaction_type&quot;: &quot;B&quot;, &quot;average_price&quot;: null, &quot;traded_quantity&quot;: 1, &quot;exchange_order_id&quot;: &quot;1100000000020532&quot;, &quot;order_id&quot;: &quot;170328000000055&quot;, &quot;exchange_time&quot;: &quot;28-Mar-2017 18:04:40&quot;, &quot;time_in_micro&quot;: &quot;1490704235700345&quot;, &quot;status&quot;: &quot;complete&quot;, &quot;total_traded_quantity&quot;: 0, &quot;traded_shares&quot;: 0, &quot;traded_price&quot;: 0, &quot;trade_id&quot;: &quot;50031308&quot;, &quot;stop_loss&quot;: 0, &quot;square_off&quot;: 0, &quot;trailing_ticks&quot;: 0 }, { &quot;exchange&quot;: &quot;NSE_EQ&quot;, &quot;token&quot;: 2885, &quot;symbol&quot;: &quot;RELIANCE&quot;, &quot;product&quot;: &quot;I&quot;, &quot;order_type&quot;: &quot;M&quot;, &quot;price&quot;: null, &quot;trigger_price&quot;: null, &quot;quantity&quot;: null, &quot;disclosed_quantity&quot;: null, &quot;transaction_type&quot;: &quot;B&quot;, &quot;average_price&quot;: null, &quot;traded_quantity&quot;: 1, &quot;exchange_order_id&quot;: &quot;1100000000019491&quot;, &quot;order_id&quot;: &quot;170328000000049&quot;, &quot;exchange_time&quot;: &quot;28-Mar-2017 17:58:14&quot;, &quot;time_in_micro&quot;: &quot;1490703850303152&quot;, &quot;status&quot;: &quot;complete&quot;, &quot;total_traded_quantity&quot;: 0, &quot;traded_shares&quot;: 0, &quot;traded_price&quot;: 0, &quot;trade_id&quot;: &quot;50028841&quot;, &quot;stop_loss&quot;: 0, &quot;square_off&quot;: 0, &quot;trailing_ticks&quot;: 0 }, { &quot;exchange&quot;: &quot;NSE_EQ&quot;, &quot;token&quot;: 2885, &quot;symbol&quot;: &quot;RELIANCE&quot;, &quot;product&quot;: &quot;I&quot;, &quot;order_type&quot;: &quot;M&quot;, &quot;price&quot;: null, &quot;trigger_price&quot;: null, &quot;quantity&quot;: null, &quot;disclosed_quantity&quot;: null, &quot;transaction_type&quot;: &quot;B&quot;, &quot;average_price&quot;: null, &quot;traded_quantity&quot;: 1, &quot;exchange_order_id&quot;: &quot;1100000000019490&quot;, &quot;order_id&quot;: &quot;170328000000048&quot;, &quot;exchange_time&quot;: &quot;28-Mar-2017 17:58:12&quot;, &quot;time_in_micro&quot;: &quot;1490703847853846&quot;, &quot;status&quot;: &quot;complete&quot;, &quot;total_traded_quantity&quot;: 0, &quot;traded_shares&quot;: 0, &quot;traded_price&quot;: 0, &quot;trade_id&quot;: &quot;50028824&quot;, &quot;stop_loss&quot;: 0, &quot;square_off&quot;: 0, &quot;trailing_ticks&quot;: 0 }, { &quot;exchange&quot;: &quot;NSE_EQ&quot;, &quot;token&quot;: 2885, &quot;symbol&quot;: &quot;RELIANCE&quot;, &quot;product&quot;: &quot;I&quot;, &quot;order_type&quot;: &quot;M&quot;, &quot;price&quot;: null, &quot;trigger_price&quot;: null, &quot;quantity&quot;: null, &quot;disclosed_quantity&quot;: null, &quot;transaction_type&quot;: &quot;B&quot;, &quot;average_price&quot;: null, &quot;traded_quantity&quot;: 1, &quot;exchange_order_id&quot;: &quot;1100000000020350&quot;, &quot;order_id&quot;: &quot;170328000000052&quot;, &quot;exchange_time&quot;: &quot;28-Mar-2017 18:03:20&quot;, &quot;time_in_micro&quot;: &quot;1490704156310111&quot;, &quot;status&quot;: &quot;complete&quot;, &quot;total_traded_quantity&quot;: 0, &quot;traded_shares&quot;: 0, &quot;traded_price&quot;: 0, &quot;trade_id&quot;: &quot;50030874&quot;, &quot;stop_loss&quot;: 0, &quot;square_off&quot;: 0, &quot;trailing_ticks&quot;: 0 }, { &quot;exchange&quot;: &quot;NSE_EQ&quot;, &quot;token&quot;: 2885, &quot;symbol&quot;: &quot;RELIANCE&quot;, &quot;product&quot;: &quot;I&quot;, &quot;order_type&quot;: &quot;L&quot;, &quot;price&quot;: null, &quot;trigger_price&quot;: null, &quot;quantity&quot;: null, &quot;disclosed_quantity&quot;: null, &quot;transaction_type&quot;: &quot;B&quot;, &quot;average_price&quot;: null, &quot;traded_quantity&quot;: 1, &quot;exchange_order_id&quot;: &quot;1100000000006972&quot;, &quot;order_id&quot;: &quot;170328000000030&quot;, &quot;exchange_time&quot;: &quot;28-Mar-2017 12:42:42&quot;, &quot;time_in_micro&quot;: &quot;1490697859120172&quot;, &quot;status&quot;: &quot;complete&quot;, &quot;total_traded_quantity&quot;: 0, &quot;traded_shares&quot;: 0, &quot;traded_price&quot;: 0, &quot;trade_id&quot;: &quot;50027602&quot;, &quot;stop_loss&quot;: 0, &quot;square_off&quot;: 0, &quot;trailing_ticks&quot;: 0 }, { &quot;exchange&quot;: &quot;NSE_EQ&quot;, &quot;token&quot;: 2885, &quot;symbol&quot;: &quot;RELIANCE&quot;, &quot;product&quot;: &quot;I&quot;, &quot;order_type&quot;: &quot;M&quot;, &quot;price&quot;: null, &quot;trigger_price&quot;: null, &quot;quantity&quot;: null, &quot;disclosed_quantity&quot;: null, &quot;transaction_type&quot;: &quot;B&quot;, &quot;average_price&quot;: null, &quot;traded_quantity&quot;: 1, &quot;exchange_order_id&quot;: &quot;1100000000020474&quot;, &quot;order_id&quot;: &quot;170328000000053&quot;, &quot;exchange_time&quot;: &quot;28-Mar-2017 18:04:20&quot;, &quot;time_in_micro&quot;: &quot;1490704215355625&quot;, &quot;status&quot;: &quot;complete&quot;, &quot;total_traded_quantity&quot;: 0, &quot;traded_shares&quot;: 0, &quot;traded_price&quot;: 0, &quot;trade_id&quot;: &quot;50031207&quot;, &quot;stop_loss&quot;: 0, &quot;square_off&quot;: 0, &quot;trailing_ticks&quot;: 0 }, { &quot;exchange&quot;: &quot;NSE_FO&quot;, &quot;token&quot;: 44866, &quot;symbol&quot;: &quot;NIFTY17MARFUT&quot;, &quot;product&quot;: &quot;I&quot;, &quot;order_type&quot;: &quot;L&quot;, &quot;price&quot;: null, &quot;trigger_price&quot;: null, &quot;quantity&quot;: null, &quot;disclosed_quantity&quot;: null, &quot;transaction_type&quot;: &quot;B&quot;, &quot;average_price&quot;: null, &quot;traded_quantity&quot;: 75, &quot;exchange_order_id&quot;: &quot;1100000000004623&quot;, &quot;order_id&quot;: &quot;170328000000031&quot;, &quot;exchange_time&quot;: &quot;28-Mar-2017 12:43:00&quot;, &quot;time_in_micro&quot;: &quot;1490684935796062&quot;, &quot;status&quot;: &quot;complete&quot;, &quot;total_traded_quantity&quot;: 0, &quot;traded_shares&quot;: 0, &quot;traded_price&quot;: 0, &quot;trade_id&quot;: &quot;50000457&quot;, &quot;stop_loss&quot;: 0, &quot;square_off&quot;: 0, &quot;trailing_ticks&quot;: 0 }, { &quot;exchange&quot;: &quot;NSE_EQ&quot;, &quot;token&quot;: 2885, &quot;symbol&quot;: &quot;RELIANCE&quot;, &quot;product&quot;: &quot;I&quot;, &quot;order_type&quot;: &quot;M&quot;, &quot;price&quot;: null, &quot;trigger_price&quot;: null, &quot;quantity&quot;: null, &quot;disclosed_quantity&quot;: null, &quot;transaction_type&quot;: &quot;B&quot;, &quot;average_price&quot;: null, &quot;traded_quantity&quot;: 1, &quot;exchange_order_id&quot;: &quot;1100000000019840&quot;, &quot;order_id&quot;: &quot;170328000000050&quot;, &quot;exchange_time&quot;: &quot;28-Mar-2017 17:59:33&quot;, &quot;time_in_micro&quot;: &quot;1490703928614186&quot;, &quot;status&quot;: &quot;complete&quot;, &quot;total_traded_quantity&quot;: 0, &quot;traded_shares&quot;: 0, &quot;traded_price&quot;: 0, &quot;trade_id&quot;: &quot;50029505&quot;, &quot;stop_loss&quot;: 0, &quot;square_off&quot;: 0, &quot;trailing_ticks&quot;: 0 }, { &quot;exchange&quot;: &quot;NSE_EQ&quot;, &quot;token&quot;: 2885, &quot;symbol&quot;: &quot;RELIANCE&quot;, &quot;product&quot;: &quot;I&quot;, &quot;order_type&quot;: &quot;M&quot;, &quot;price&quot;: null, &quot;trigger_price&quot;: null, &quot;quantity&quot;: null, &quot;disclosed_quantity&quot;: null, &quot;transaction_type&quot;: &quot;B&quot;, &quot;average_price&quot;: null, &quot;traded_quantity&quot;: 1, &quot;exchange_order_id&quot;: &quot;1100000000020149&quot;, &quot;order_id&quot;: &quot;170328000000051&quot;, &quot;exchange_time&quot;: &quot;28-Mar-2017 18:01:49&quot;, &quot;time_in_micro&quot;: &quot;1490704064457870&quot;, &quot;status&quot;: &quot;complete&quot;, &quot;total_traded_quantity&quot;: 0, &quot;traded_shares&quot;: 0, &quot;traded_price&quot;: 0, &quot;trade_id&quot;: &quot;50030314&quot;, &quot;stop_loss&quot;: 0, &quot;square_off&quot;: 0, &quot;trailing_ticks&quot;: 0 } ] } modifyOrder(params) Modify the order by updating the order quantity Parameters: Name Type Description params Object Properties Name Type Argument Description order_id number The order which is to be modified parent_order_id number &lt;optional&gt; The parent order id in case of CO and OCO orders price number &lt;optional&gt; The limit price for the order, defaults to 0 trigger_price number &lt;optional&gt; The trigger price for the order, defaults to 0 quantity number &lt;optional&gt; The quantity of order disclosed_quantity number &lt;optional&gt; The quantity to disclose valid_date string &lt;optional&gt; The valid date of the order in case of MCX_FO Source: src/UpstoxAPI.js, line 744 Returns: Type res Example { &quot;code&quot;: 200, &quot;status&quot;: &quot;OK&quot;, &quot;timestamp&quot;: &quot;2017-03-27T11:57:02+05:30&quot;, &quot;message&quot;: &quot;success&quot;, &quot;data&quot;: { &quot;exchange&quot;: &quot;NSE_EQ&quot;, &quot;token&quot;: 2885, &quot;symbol&quot;: &quot;RELIANCE&quot;, &quot;product&quot;: &quot;I&quot;, &quot;order_type&quot;: &quot;M&quot;, &quot;duration&quot;: &quot;DAY&quot;, &quot;price&quot;: 0, &quot;trigger_price&quot;: 0, &quot;quantity&quot;: 10, &quot;disclosed_quantity&quot;: 0, &quot;transaction_type&quot;: &quot;B&quot;, &quot;average_price&quot;: 0, &quot;traded_quantity&quot;: 0, &quot;message&quot;: &quot;&quot;, &quot;exchange_order_id&quot;: &quot;&quot;, &quot;parent_order_id&quot;: &quot;NA&quot;, &quot;order_id&quot;: &quot;170327000000003&quot;, &quot;exchange_time&quot;: &quot;&quot;, &quot;time_in_micro&quot;: &quot;1490595778207641&quot;, &quot;status&quot;: &quot;not modified&quot;, &quot;is_amo&quot;: false, &quot;valid_date&quot;: &quot;&quot;, &quot;order_request_id&quot;: &quot;2&quot;, &quot;total_traded_quantity&quot;: 0, &quot;traded_shares&quot;: 0, &quot;traded_price&quot;: 0, &quot;stop_loss&quot;: 0, &quot;square_off&quot;: 0, &quot;trailing_ticks&quot;: 0 } } cancelOrder(params) Cancel the order Parameters: Name Type Description params object Properties Name Type Description order_id number order_id generated after you place an order. Source: src/UpstoxAPI.js, line 808 Returns: Type res Example { &quot;code&quot;: 200, &quot;status&quot;: &quot;OK&quot;, &quot;timestamp&quot;: &quot;2017-03-27T11:38:40+05:30&quot;, &quot;message&quot;: &quot;success&quot;, &quot;data&quot;: { &quot;exchange&quot;: &quot;NSE_EQ&quot;, &quot;token&quot;: 2885, &quot;symbol&quot;: &quot;RELIANCE&quot;, &quot;product&quot;: &quot;I&quot;, &quot;order_type&quot;: &quot;M&quot;, &quot;duration&quot;: &quot;DAY&quot;, &quot;price&quot;: 0, &quot;trigger_price&quot;: 0, &quot;quantity&quot;: 1, &quot;disclosed_quantity&quot;: 1, &quot;transaction_type&quot;: &quot;B&quot;, &quot;average_price&quot;: 0, &quot;traded_quantity&quot;: 0, &quot;message&quot;: &quot;&quot;, &quot;exchange_order_id&quot;: &quot;&quot;, &quot;parent_order_id&quot;: &quot;NA&quot;, &quot;order_id&quot;: &quot;170327000000002&quot;, &quot;exchange_time&quot;: &quot;&quot;, &quot;time_in_micro&quot;: &quot;1490594676511489&quot;, &quot;status&quot;: &quot;not cancelled&quot;, &quot;is_amo&quot;: false, &quot;valid_date&quot;: &quot;&quot;, &quot;order_request_id&quot;: &quot;2&quot;, &quot;total_traded_quantity&quot;: 0, &quot;traded_shares&quot;: 0, &quot;traded_price&quot;: 0, &quot;stop_loss&quot;: 0, &quot;square_off&quot;: 0, &quot;trailing_ticks&quot;: 0 } } getMasterContract(params) Download the master contract as csv. The master contract contains all necessary information about all available contracts. Gets all contracts or filter contracts by exchange segment. Parameters: Name Type Description params object Properties Name Type Argument Description exchange string &lt;optional&gt; name of the exchange to get specific BOD details eg : The exchange segment params.exchange can be - bse_eq (BSE Equity) bcd_fo (BSE Futures &amp; Options) nse_eq (NSE Equity) nse_fo (NSE Futures &amp; Options) ncd_fo (NSE Currency Futures &amp; Options) Source: src/UpstoxAPI.js, line 867 Returns: Type res Example { &quot;code&quot;: 200, &quot;status&quot;: &quot;OK&quot;, &quot;timestamp&quot;: &quot;2017-03-07T15:33:08+05:30&quot;, &quot;message&quot;: &quot;success&quot;, &quot;data&quot;:[ &quot;exchange,token,parent_token,symbol,name,closing_price,expiry,strike_price,tick_size,lot_size,instrument_type&quot;, &quot;NSE_EQ,19262,,1,LTAMC - 1,,,,1,1,&quot;, &quot;NSE_EQ,10104,,1IADD,DHFL PRAMERICA MF - HYBRI,,,,1,1,&quot;, &quot;NSE_EQ,10105,,1ID1G,DHFL PRAMERICA MF - HYBRI,,,,1,1,&quot;, &quot;NSE_EQ,10106,,1ID2D,DHFL PRAMERICA MF - HYBRI,,,,1,1,&quot;, ..... ] } getLiveFeed(params) Get Instruments list Parameters: Name Type Description params object Properties Name Type Argument Description exchange string name of the exchange to get live feeds of. eg: The exchange segment params.exchange can be - bse_eq (BSE Equity) bcd_fo (BSE Futures &amp; Options) nse_eq (NSE Equity) nse_fo (NSE Futures &amp; Options) ncd_fo (NSE Currency Futures &amp; Options) symbol string The symbol of the instrument. This must match exactly as given in the master contract csv. eg: reliance type string type of feed. eg: &quot;ltp&quot;, &quot;full&quot; format string &lt;optional&gt; Response format json/csv Source: src/UpstoxAPI.js, line 913 Returns: Type res Example { &quot;code&quot;: 200, &quot;status&quot;: &quot;OK&quot;, &quot;timestamp&quot;: &quot;2017-03-07T15:50:40+05:30&quot;, &quot;message&quot;: &quot;feed&quot;, &quot;data&quot;:{ &quot;timestamp&quot;: 1488882035000, &quot;ltp&quot;: 1304.95, &quot;open&quot;: 1318.85, &quot;high&quot;: 1327, &quot;low&quot;: 1296.15, &quot;close&quot;: 1304.95, &quot;vtt&quot;: 9616358, &quot;atp&quot;: 1309.21, &quot;oi&quot;: null, &quot;spot_price&quot;: 0, &quot;total_buy_qty&quot;: 7454, &quot;total_sell_qty&quot;: 0, &quot;bids&quot;:[{ &quot;quantity&quot;: 7454, &quot;price&quot;: 1304.95, &quot;orders&quot;: 36 }], &quot;asks&quot;:[{ &quot;quantity&quot;: 0, &quot;price&quot;: 0, &quot;orders&quot;: 0 }] } } getOHLC(params) Get the OHLC candle values for a given instrument Parameters: Name Type Description params Properties Name Type Argument Description exchange string name of the exchange to get live feeds of. eg: The exchange segment params.exchange can be - bse_eq (BSE Equity) bcd_fo (BSE Futures &amp; Options) nse_eq (NSE Equity) nse_fo (NSE Futures &amp; Options) ncd_fo (NSE Currency Futures &amp; Options) symbol string The symbol of the instrument. This must match exactly as given in the master contract csv eg: reliance interval string &lt;optional&gt; Default: 1day 1MINUTE 5MINUTE 10MINUTE 30MINUTE 60MINUTE 1DAY 1WEEK 1MONTH start_date string &lt;optional&gt; Default: 15 days before today Date format: DD-MM-YYYY end_date string &lt;optional&gt; Default: today Date format: DD-MM-YYYY format string &lt;optional&gt; Default: json csv json Source: src/UpstoxAPI.js, line 981 Returns: Type res Example { &quot;code&quot;: 200, &quot;status&quot;: &quot;OK&quot;, &quot;timestamp&quot;: &quot;&quot;, &quot;message&quot;: &quot;ohlc&quot;, &quot;data&quot;: [ { &quot;timestamp&quot;: 1485973800000, &quot;open&quot;: 1050, &quot;high&quot;: 1050.8, &quot;low&quot;: 1038.25, &quot;close&quot;: 1043.5, &quot;volume&quot;: 2079908, &quot;cp&quot;: 1045.55 } ] } subscribeFeed(params) Subscribe to a live feed for a given exchange and set of symbols Parameters: Name Type Description params Properties Name Type Description exchange string name of the exchange to get live feeds of. eg: The exchange segment params.exchange can be - bse_eq (BSE Equity) bcd_fo (BSE Futures &amp; Options) nse_eq (NSE Equity) nse_fo (NSE Futures &amp; Options) ncd_fo (NSE Currency Futures &amp; Options) symbol string The symbol of the instrument. This must match exactly as given in the master contract csv. The symbol can have multiple symbols, separated by comma eg: reliance type string The type of feed &quot;ltp&quot; or &quot;full&quot; Source: src/UpstoxAPI.js, line 1051 Returns: Type res unsubscribeFeed(params) Unsubscribe from a live feed for a given exchange and set of symbols Parameters: Name Type Description params Properties Name Type Description exchange string name of the exchange to get live feeds of. eg: The exchange segment params.exchange can be - bse_eq (BSE Equity) bcd_fo (BSE Futures &amp; Options) nse_eq (NSE Equity) nse_fo (NSE Futures &amp; Options) ncd_fo (NSE Currency Futures &amp; Options) symbol string The symbol of the instrument. This must match exactly as given in the master contract csv. The symbol can have multiple symbols, separated by comma eg: reliance type string The type of feed &quot;ltp&quot; or &quot;full&quot; Source: src/UpstoxAPI.js, line 1081 Returns: Type res connectSocket() Connect to web socket server. Source: src/UpstoxAPI.js, line 1111 Throws: User not autheticated Type Error Connection Error Type Error Returns: promise Example var upstox = new Upstox(&quot;your_apikey&quot;, &quot;your_apiSecretKey&quot;); upstox.getSessionToken(login_credentials) .then((response)=&gt;{ upstox.connectSocket() .then(() =&gt; { //code to set socket listeners }, (err) =&gt; { //handle connection errors }); }); closeSocket() Close the socket connection. Source: src/UpstoxAPI.js, line 1204 on(eventName, listener) set socket event listeners Parameters: Name Type Description eventName string name of the event. The eventName can be - orderUpdate positionUpdate tradeUpdate liveFeed disconnected error listener function function to listen to events Source: src/UpstoxAPI.js, line 1216 Throws: Unsupported event Type Error Incorrect Parameter Type Error Example var upstox = new Upstox(&quot;your_apikey&quot;, &quot;your_apiSecretKey&quot;); upstox.getSessionToken(login_credentials) .then((response)=&gt;{ upstox.connectSocket() .then(() =&gt; { //code to set socket listeners upstox.on(&quot;orderUpdate&quot;, function(message) { //message for order updates }); upstox.on(&quot;positionUpdate&quot;, function(message) { //message for position conversion }); upstox.on(&quot;tradeUpdate&quot;, function(message) { //message for trade updates }); upstox.on(&quot;liveFeed&quot;, function(message) { //message for live feed }); upstox.on(&quot;disconnected&quot;, function(message) { //listener after socket connection is disconnected }); upstox.on(&quot;error&quot;, function(error) { //error listener }); }, (err) =&gt; { //handle connection errors }); }); × Search results Close Documentation generated by JSDoc 3.4.3 on Tue Apr 25th 2017 using the DocStrap template. "},"module-Example.html":{"id":"module-Example.html","title":"Module: Example","body":" Upstox API Modules Example Classes Upstox Module: Example Currently the node module is not yet published. To start using upstox services - Require the index.js. Authenticate with your uccid and password with Upstox using getSessionToken method. On completion of authentication, subsequent services can be called as shown in below example. Every service returns a promise which will either be resolved or rejected. Websocket services are available for following events -[live data, position updates, tradeUpdates, liveFeeds] To get an active socket connection use connectSocket Method. Source: example/example.js, line 5 × Search results Close Documentation generated by JSDoc 3.4.3 on Tue Apr 25th 2017 using the DocStrap template. "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
